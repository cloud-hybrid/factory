"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const path = require("path");
/**
 * Buffers the text of a file for later saving.
 */
class FileBuffer {
    constructor(filePath) {
        this.buffer = '';
        this.filePath = filePath;
    }
    write(s) {
        this.buffer += s;
    }
    async save(rootDir) {
        const fullPath = path.join(rootDir, this.filePath);
        await fs.mkdirs(path.dirname(fullPath));
        await fs.writeFile(fullPath, this.buffer);
        return fullPath;
    }
}
exports.default = FileBuffer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZWJ1ZmYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaWxlYnVmZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFFN0I7O0dBRUc7QUFDSCxNQUFxQixVQUFVO0lBSTdCLFlBQW1CLFFBQWdCO1FBRjNCLFdBQU0sR0FBRyxFQUFFLENBQUM7UUFHbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVNLEtBQUssQ0FBQyxDQUFTO1FBQ3BCLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0lBQ25CLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQWU7UUFDL0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDeEMsTUFBTSxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUMsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBbEJELDZCQWtCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbi8qKlxuICogQnVmZmVycyB0aGUgdGV4dCBvZiBhIGZpbGUgZm9yIGxhdGVyIHNhdmluZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUJ1ZmZlciB7XG4gIHB1YmxpYyByZWFkb25seSBmaWxlUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIGJ1ZmZlciA9ICcnO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgdGhpcy5maWxlUGF0aCA9IGZpbGVQYXRoO1xuICB9XG5cbiAgcHVibGljIHdyaXRlKHM6IHN0cmluZykge1xuICAgIHRoaXMuYnVmZmVyICs9IHM7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZShyb290RGlyOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihyb290RGlyLCB0aGlzLmZpbGVQYXRoKTtcbiAgICBhd2FpdCBmcy5ta2RpcnMocGF0aC5kaXJuYW1lKGZ1bGxQYXRoKSk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGZ1bGxQYXRoLCB0aGlzLmJ1ZmZlcik7XG4gICAgcmV0dXJuIGZ1bGxQYXRoO1xuICB9XG59XG4iXX0=
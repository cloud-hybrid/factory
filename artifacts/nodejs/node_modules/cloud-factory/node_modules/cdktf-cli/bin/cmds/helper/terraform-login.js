"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TerraformLogin = void 0;
const fs = __importStar(require("fs"));
const inquirer = __importStar(require("inquirer"));
const open = __importStar(require("open"));
const chalk = __importStar(require("chalk"));
const chalkColour = new chalk.Instance();
const homedir = require("os").homedir();
const terraformCredentialsFilePath = `${homedir}/.terraform.d/credentials.tfrc.json`;
const terraformLoginURL = `https://app.terraform.io/app/settings/tokens?source=terraform-login`;
class TerraformLogin {
    async askToContinue() {
        // Describe the command
        console.log(chalkColour `{greenBright Welcome to CDK for Terraform!}

By default, cdktf allows you to manage the state of your stacks using Terraform Cloud for free.
cdktf will request an API token for app.terraform.io using your browser.

If login is successful, cdktf will store the token in plain text in
the following file for use by subsequent Terraform commands:
    {whiteBright ${terraformCredentialsFilePath}}

{yellow Note: The local storage mode isn't recommended for storing the state of your stacks.}
`);
        let isLogin = false;
        const { tfCloud } = await inquirer.prompt([
            {
                name: "tfCloud",
                type: "confirm",
                message: "Do you want to continue with Terraform Cloud remote state management?",
            },
        ]);
        if (tfCloud) {
            isLogin = true;
            this.openBrowser();
        }
        return isLogin;
    }
    openBrowser() {
        console.log(`\nopening webpage using your browser.....\n`);
        console.log(chalkColour `If the web browser didn't open the window automatically, you can go to the following url:
        {whiteBright ${terraformLoginURL}}\n`);
        return open.default(terraformLoginURL);
    }
    async askForToken() {
        const { token } = await inquirer.prompt([
            {
                name: "token",
                message: "Token for app.terraform.io ðŸ”‘",
                type: "password",
            },
        ]);
        return token;
    }
    async saveTerraformCredentials(token) {
        const credentialsFileJSON = JSON.stringify({ credentials: { "app.terraform.io": { token: token } } }, undefined, 2);
        fs.writeFileSync(terraformCredentialsFilePath, credentialsFileJSON);
    }
    async checkIfTerraformCredentialsExist() {
        if (fs.existsSync(terraformCredentialsFilePath)) {
            const token = await this.getTokenFromTerraformCredentialsFile();
            if (token != "") {
                return true;
            }
        }
        return false;
    }
    async getTokenFromTerraformCredentialsFile() {
        const terraformCredentials = await this.getTerraformCredentialsFile();
        if ("app.terraform.io" in terraformCredentials.credentials) {
            return terraformCredentials.credentials["app.terraform.io"].token;
        }
        return "";
    }
    async getTerraformCredentialsFile() {
        const credentialsFile = JSON.parse(fs.readFileSync(terraformCredentialsFilePath).toString());
        const terraformCredentials = credentialsFile;
        return terraformCredentials;
    }
    async askToLogin() {
        const checkToken = await this.checkIfTerraformCredentialsExist();
        // user login if not already
        if (!checkToken) {
            const shouldContinue = await this.askToContinue();
            if (shouldContinue) {
                const token = await this.askForToken();
                if (token == "") {
                    console.error(`\nERROR: failed to gather token.\n`);
                    process.exit(1);
                }
                this.saveTerraformCredentials(token);
                return token;
            }
        }
        else {
            const token = this.getTokenFromTerraformCredentialsFile();
            return token;
        }
        return "";
    }
}
exports.TerraformLogin = TerraformLogin;
// Note: we might want to look into using 'readline' instead for async reading of input.
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFmb3JtLWxvZ2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidGVycmFmb3JtLWxvZ2luLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSx1Q0FBeUI7QUFDekIsbURBQXFDO0FBQ3JDLDJDQUE2QjtBQUM3Qiw2Q0FBK0I7QUFFL0IsTUFBTSxXQUFXLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDekMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3hDLE1BQU0sNEJBQTRCLEdBQUcsR0FBRyxPQUFPLHFDQUFxQyxDQUFDO0FBQ3JGLE1BQU0saUJBQWlCLEdBQUcscUVBQXFFLENBQUM7QUFjaEcsTUFBYSxjQUFjO0lBQ2xCLEtBQUssQ0FBQyxhQUFhO1FBQ3hCLHVCQUF1QjtRQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQTs7Ozs7OzttQkFPUiw0QkFBNEI7OztDQUc5QyxDQUFDLENBQUM7UUFFQyxJQUFJLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFFcEIsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE1BQU0sUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUN4QztnQkFDRSxJQUFJLEVBQUUsU0FBUztnQkFDZixJQUFJLEVBQUUsU0FBUztnQkFDZixPQUFPLEVBQ0wsdUVBQXVFO2FBQzFFO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxPQUFPLEVBQUU7WUFDWCxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ2YsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3BCO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLDZDQUE2QyxDQUFDLENBQUM7UUFDM0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUE7dUJBQ0osaUJBQWlCLEtBQUssQ0FBQyxDQUFDO1FBQzNDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFTSxLQUFLLENBQUMsV0FBVztRQUN0QixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQ3RDO2dCQUNFLElBQUksRUFBRSxPQUFPO2dCQUNiLE9BQU8sRUFBRSwrQkFBK0I7Z0JBQ3hDLElBQUksRUFBRSxVQUFVO2FBQ2pCO1NBQ0YsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRU0sS0FBSyxDQUFDLHdCQUF3QixDQUFDLEtBQWE7UUFDakQsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUN4QyxFQUFFLFdBQVcsRUFBRSxFQUFFLGtCQUFrQixFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFDekQsU0FBUyxFQUNULENBQUMsQ0FDRixDQUFDO1FBQ0YsRUFBRSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFTSxLQUFLLENBQUMsZ0NBQWdDO1FBQzNDLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFO1lBQy9DLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLG9DQUFvQyxFQUFFLENBQUM7WUFDaEUsSUFBSSxLQUFLLElBQUksRUFBRSxFQUFFO2dCQUNmLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVNLEtBQUssQ0FBQyxvQ0FBb0M7UUFDL0MsTUFBTSxvQkFBb0IsR0FBRyxNQUFNLElBQUksQ0FBQywyQkFBMkIsRUFBRSxDQUFDO1FBQ3RFLElBQUksa0JBQWtCLElBQUksb0JBQW9CLENBQUMsV0FBVyxFQUFFO1lBQzFELE9BQU8sb0JBQW9CLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsS0FBSyxDQUFDO1NBQ25FO1FBRUQsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRU0sS0FBSyxDQUFDLDJCQUEyQjtRQUN0QyxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUNoQyxFQUFFLENBQUMsWUFBWSxDQUFDLDRCQUE0QixDQUFDLENBQUMsUUFBUSxFQUFFLENBQ3pELENBQUM7UUFDRixNQUFNLG9CQUFvQixHQUE2QixlQUFlLENBQUM7UUFFdkUsT0FBTyxvQkFBb0IsQ0FBQztJQUM5QixDQUFDO0lBRU0sS0FBSyxDQUFDLFVBQVU7UUFDckIsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQztRQUNqRSw0QkFBNEI7UUFDNUIsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNmLE1BQU0sY0FBYyxHQUFHLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ2xELElBQUksY0FBYyxFQUFFO2dCQUNsQixNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDdkMsSUFBSSxLQUFLLElBQUksRUFBRSxFQUFFO29CQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsb0NBQW9DLENBQUMsQ0FBQztvQkFDcEQsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDakI7Z0JBQ0QsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyQyxPQUFPLEtBQUssQ0FBQzthQUNkO1NBQ0Y7YUFBTTtZQUNMLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxDQUFDO1lBQzFELE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Q0FDRjtBQS9HRCx3Q0ErR0M7QUFFRCx3RkFBd0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCAqIGFzIGlucXVpcmVyIGZyb20gXCJpbnF1aXJlclwiO1xuaW1wb3J0ICogYXMgb3BlbiBmcm9tIFwib3BlblwiO1xuaW1wb3J0ICogYXMgY2hhbGsgZnJvbSBcImNoYWxrXCI7XG5cbmNvbnN0IGNoYWxrQ29sb3VyID0gbmV3IGNoYWxrLkluc3RhbmNlKCk7XG5jb25zdCBob21lZGlyID0gcmVxdWlyZShcIm9zXCIpLmhvbWVkaXIoKTtcbmNvbnN0IHRlcnJhZm9ybUNyZWRlbnRpYWxzRmlsZVBhdGggPSBgJHtob21lZGlyfS8udGVycmFmb3JtLmQvY3JlZGVudGlhbHMudGZyYy5qc29uYDtcbmNvbnN0IHRlcnJhZm9ybUxvZ2luVVJMID0gYGh0dHBzOi8vYXBwLnRlcnJhZm9ybS5pby9hcHAvc2V0dGluZ3MvdG9rZW5zP3NvdXJjZT10ZXJyYWZvcm0tbG9naW5gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhvc3RuYW1lIHtcbiAgdG9rZW46IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVkZW50aWFscyB7XG4gIFwiYXBwLnRlcnJhZm9ybS5pb1wiOiBIb3N0bmFtZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXJyYWZvcm1DcmVkZW50aWFsc0ZpbGUge1xuICBjcmVkZW50aWFsczogQ3JlZGVudGlhbHM7XG59XG5cbmV4cG9ydCBjbGFzcyBUZXJyYWZvcm1Mb2dpbiB7XG4gIHB1YmxpYyBhc3luYyBhc2tUb0NvbnRpbnVlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIERlc2NyaWJlIHRoZSBjb21tYW5kXG4gICAgY29uc29sZS5sb2coY2hhbGtDb2xvdXJge2dyZWVuQnJpZ2h0IFdlbGNvbWUgdG8gQ0RLIGZvciBUZXJyYWZvcm0hfVxuXG5CeSBkZWZhdWx0LCBjZGt0ZiBhbGxvd3MgeW91IHRvIG1hbmFnZSB0aGUgc3RhdGUgb2YgeW91ciBzdGFja3MgdXNpbmcgVGVycmFmb3JtIENsb3VkIGZvciBmcmVlLlxuY2RrdGYgd2lsbCByZXF1ZXN0IGFuIEFQSSB0b2tlbiBmb3IgYXBwLnRlcnJhZm9ybS5pbyB1c2luZyB5b3VyIGJyb3dzZXIuXG5cbklmIGxvZ2luIGlzIHN1Y2Nlc3NmdWwsIGNka3RmIHdpbGwgc3RvcmUgdGhlIHRva2VuIGluIHBsYWluIHRleHQgaW5cbnRoZSBmb2xsb3dpbmcgZmlsZSBmb3IgdXNlIGJ5IHN1YnNlcXVlbnQgVGVycmFmb3JtIGNvbW1hbmRzOlxuICAgIHt3aGl0ZUJyaWdodCAke3RlcnJhZm9ybUNyZWRlbnRpYWxzRmlsZVBhdGh9fVxuXG57eWVsbG93IE5vdGU6IFRoZSBsb2NhbCBzdG9yYWdlIG1vZGUgaXNuJ3QgcmVjb21tZW5kZWQgZm9yIHN0b3JpbmcgdGhlIHN0YXRlIG9mIHlvdXIgc3RhY2tzLn1cbmApO1xuXG4gICAgbGV0IGlzTG9naW4gPSBmYWxzZTtcblxuICAgIGNvbnN0IHsgdGZDbG91ZCB9ID0gYXdhaXQgaW5xdWlyZXIucHJvbXB0KFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ0ZkNsb3VkXCIsXG4gICAgICAgIHR5cGU6IFwiY29uZmlybVwiLFxuICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgIFwiRG8geW91IHdhbnQgdG8gY29udGludWUgd2l0aCBUZXJyYWZvcm0gQ2xvdWQgcmVtb3RlIHN0YXRlIG1hbmFnZW1lbnQ/XCIsXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgaWYgKHRmQ2xvdWQpIHtcbiAgICAgIGlzTG9naW4gPSB0cnVlO1xuICAgICAgdGhpcy5vcGVuQnJvd3NlcigpO1xuICAgIH1cblxuICAgIHJldHVybiBpc0xvZ2luO1xuICB9XG5cbiAgb3BlbkJyb3dzZXIoKSB7XG4gICAgY29uc29sZS5sb2coYFxcbm9wZW5pbmcgd2VicGFnZSB1c2luZyB5b3VyIGJyb3dzZXIuLi4uLlxcbmApO1xuICAgIGNvbnNvbGUubG9nKGNoYWxrQ29sb3VyYElmIHRoZSB3ZWIgYnJvd3NlciBkaWRuJ3Qgb3BlbiB0aGUgd2luZG93IGF1dG9tYXRpY2FsbHksIHlvdSBjYW4gZ28gdG8gdGhlIGZvbGxvd2luZyB1cmw6XG4gICAgICAgIHt3aGl0ZUJyaWdodCAke3RlcnJhZm9ybUxvZ2luVVJMfX1cXG5gKTtcbiAgICByZXR1cm4gb3Blbi5kZWZhdWx0KHRlcnJhZm9ybUxvZ2luVVJMKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBhc2tGb3JUb2tlbigpIHtcbiAgICBjb25zdCB7IHRva2VuIH0gPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQoW1xuICAgICAge1xuICAgICAgICBuYW1lOiBcInRva2VuXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiVG9rZW4gZm9yIGFwcC50ZXJyYWZvcm0uaW8g8J+UkVwiLFxuICAgICAgICB0eXBlOiBcInBhc3N3b3JkXCIsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlVGVycmFmb3JtQ3JlZGVudGlhbHModG9rZW46IHN0cmluZykge1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzRmlsZUpTT04gPSBKU09OLnN0cmluZ2lmeShcbiAgICAgIHsgY3JlZGVudGlhbHM6IHsgXCJhcHAudGVycmFmb3JtLmlvXCI6IHsgdG9rZW46IHRva2VuIH0gfSB9LFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgMlxuICAgICk7XG4gICAgZnMud3JpdGVGaWxlU3luYyh0ZXJyYWZvcm1DcmVkZW50aWFsc0ZpbGVQYXRoLCBjcmVkZW50aWFsc0ZpbGVKU09OKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjaGVja0lmVGVycmFmb3JtQ3JlZGVudGlhbHNFeGlzdCgpIHtcbiAgICBpZiAoZnMuZXhpc3RzU3luYyh0ZXJyYWZvcm1DcmVkZW50aWFsc0ZpbGVQYXRoKSkge1xuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmdldFRva2VuRnJvbVRlcnJhZm9ybUNyZWRlbnRpYWxzRmlsZSgpO1xuICAgICAgaWYgKHRva2VuICE9IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFRva2VuRnJvbVRlcnJhZm9ybUNyZWRlbnRpYWxzRmlsZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRlcnJhZm9ybUNyZWRlbnRpYWxzID0gYXdhaXQgdGhpcy5nZXRUZXJyYWZvcm1DcmVkZW50aWFsc0ZpbGUoKTtcbiAgICBpZiAoXCJhcHAudGVycmFmb3JtLmlvXCIgaW4gdGVycmFmb3JtQ3JlZGVudGlhbHMuY3JlZGVudGlhbHMpIHtcbiAgICAgIHJldHVybiB0ZXJyYWZvcm1DcmVkZW50aWFscy5jcmVkZW50aWFsc1tcImFwcC50ZXJyYWZvcm0uaW9cIl0udG9rZW47XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0VGVycmFmb3JtQ3JlZGVudGlhbHNGaWxlKCk6IFByb21pc2U8VGVycmFmb3JtQ3JlZGVudGlhbHNGaWxlPiB7XG4gICAgY29uc3QgY3JlZGVudGlhbHNGaWxlID0gSlNPTi5wYXJzZShcbiAgICAgIGZzLnJlYWRGaWxlU3luYyh0ZXJyYWZvcm1DcmVkZW50aWFsc0ZpbGVQYXRoKS50b1N0cmluZygpXG4gICAgKTtcbiAgICBjb25zdCB0ZXJyYWZvcm1DcmVkZW50aWFsczogVGVycmFmb3JtQ3JlZGVudGlhbHNGaWxlID0gY3JlZGVudGlhbHNGaWxlO1xuXG4gICAgcmV0dXJuIHRlcnJhZm9ybUNyZWRlbnRpYWxzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGFza1RvTG9naW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBjaGVja1Rva2VuID0gYXdhaXQgdGhpcy5jaGVja0lmVGVycmFmb3JtQ3JlZGVudGlhbHNFeGlzdCgpO1xuICAgIC8vIHVzZXIgbG9naW4gaWYgbm90IGFscmVhZHlcbiAgICBpZiAoIWNoZWNrVG9rZW4pIHtcbiAgICAgIGNvbnN0IHNob3VsZENvbnRpbnVlID0gYXdhaXQgdGhpcy5hc2tUb0NvbnRpbnVlKCk7XG4gICAgICBpZiAoc2hvdWxkQ29udGludWUpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmFza0ZvclRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbiA9PSBcIlwiKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgXFxuRVJST1I6IGZhaWxlZCB0byBnYXRoZXIgdG9rZW4uXFxuYCk7XG4gICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZVRlcnJhZm9ybUNyZWRlbnRpYWxzKHRva2VuKTtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMuZ2V0VG9rZW5Gcm9tVGVycmFmb3JtQ3JlZGVudGlhbHNGaWxlKCk7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn1cblxuLy8gTm90ZTogd2UgbWlnaHQgd2FudCB0byBsb29rIGludG8gdXNpbmcgJ3JlYWRsaW5lJyBpbnN0ZWFkIGZvciBhc3luYyByZWFkaW5nIG9mIGlucHV0LlxuIl19
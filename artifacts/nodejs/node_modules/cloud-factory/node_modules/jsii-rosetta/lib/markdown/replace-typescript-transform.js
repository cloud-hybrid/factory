"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReplaceTypeScriptTransform = void 0;
const snippet_1 = require("../snippet");
const replace_code_renderer_1 = require("./replace-code-renderer");
/**
 * A specialization of ReplaceCodeTransform that maintains state about TypeScript snippets
 */
class ReplaceTypeScriptTransform extends replace_code_renderer_1.ReplaceCodeTransform {
    constructor(api, strict, replacer) {
        super((block, line) => {
            var _a;
            const languageParts = block.language ? block.language.split(' ') : [];
            if (languageParts[0] !== 'typescript' && languageParts[0] !== 'ts') {
                return block;
            }
            const tsSnippet = snippet_1.typeScriptSnippetFromSource(block.source, { api, field: { field: 'markdown', line } }, strict, snippet_1.parseKeyValueList(languageParts.slice(1)));
            return (_a = replacer(tsSnippet)) !== null && _a !== void 0 ? _a : block;
        });
    }
}
exports.ReplaceTypeScriptTransform = ReplaceTypeScriptTransform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwbGFjZS10eXBlc2NyaXB0LXRyYW5zZm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcGxhY2UtdHlwZXNjcmlwdC10cmFuc2Zvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0NBQTRHO0FBQzVHLG1FQUErRDtBQUsvRDs7R0FFRztBQUNILE1BQWEsMEJBQTJCLFNBQVEsNENBQW9CO0lBQ2xFLFlBQW1CLEdBQWdCLEVBQUUsTUFBZSxFQUFFLFFBQTRCO1FBQ2hGLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRTs7WUFDcEIsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN0RSxJQUFJLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxZQUFZLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDbEUsT0FBTyxLQUFLLENBQUM7YUFDZDtZQUVELE1BQU0sU0FBUyxHQUFHLHFDQUEyQixDQUMzQyxLQUFLLENBQUMsTUFBTSxFQUNaLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFDM0MsTUFBTSxFQUNOLDJCQUFpQixDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDMUMsQ0FBQztZQUVGLGFBQU8sUUFBUSxDQUFDLFNBQVMsQ0FBQyxtQ0FBSSxLQUFLLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUFsQkQsZ0VBa0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZVNjcmlwdFNuaXBwZXQsIHR5cGVTY3JpcHRTbmlwcGV0RnJvbVNvdXJjZSwgcGFyc2VLZXlWYWx1ZUxpc3QsIEFwaUxvY2F0aW9uIH0gZnJvbSAnLi4vc25pcHBldCc7XG5pbXBvcnQgeyBSZXBsYWNlQ29kZVRyYW5zZm9ybSB9IGZyb20gJy4vcmVwbGFjZS1jb2RlLXJlbmRlcmVyJztcbmltcG9ydCB7IENvZGVCbG9jayB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBUeXBlU2NyaXB0UmVwbGFjZXIgPSAoY29kZTogVHlwZVNjcmlwdFNuaXBwZXQpID0+IENvZGVCbG9jayB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemF0aW9uIG9mIFJlcGxhY2VDb2RlVHJhbnNmb3JtIHRoYXQgbWFpbnRhaW5zIHN0YXRlIGFib3V0IFR5cGVTY3JpcHQgc25pcHBldHNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlcGxhY2VUeXBlU2NyaXB0VHJhbnNmb3JtIGV4dGVuZHMgUmVwbGFjZUNvZGVUcmFuc2Zvcm0ge1xuICBwdWJsaWMgY29uc3RydWN0b3IoYXBpOiBBcGlMb2NhdGlvbiwgc3RyaWN0OiBib29sZWFuLCByZXBsYWNlcjogVHlwZVNjcmlwdFJlcGxhY2VyKSB7XG4gICAgc3VwZXIoKGJsb2NrLCBsaW5lKSA9PiB7XG4gICAgICBjb25zdCBsYW5ndWFnZVBhcnRzID0gYmxvY2subGFuZ3VhZ2UgPyBibG9jay5sYW5ndWFnZS5zcGxpdCgnICcpIDogW107XG4gICAgICBpZiAobGFuZ3VhZ2VQYXJ0c1swXSAhPT0gJ3R5cGVzY3JpcHQnICYmIGxhbmd1YWdlUGFydHNbMF0gIT09ICd0cycpIHtcbiAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0c1NuaXBwZXQgPSB0eXBlU2NyaXB0U25pcHBldEZyb21Tb3VyY2UoXG4gICAgICAgIGJsb2NrLnNvdXJjZSxcbiAgICAgICAgeyBhcGksIGZpZWxkOiB7IGZpZWxkOiAnbWFya2Rvd24nLCBsaW5lIH0gfSxcbiAgICAgICAgc3RyaWN0LFxuICAgICAgICBwYXJzZUtleVZhbHVlTGlzdChsYW5ndWFnZVBhcnRzLnNsaWNlKDEpKSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiByZXBsYWNlcih0c1NuaXBwZXQpID8/IGJsb2NrO1xuICAgIH0pO1xuICB9XG59XG4iXX0=
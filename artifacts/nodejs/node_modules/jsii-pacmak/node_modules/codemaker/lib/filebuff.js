"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
/**
 * Buffers the text of a file for later saving.
 */
class FileBuffer {
    constructor(filePath) {
        this.buffer = '';
        this.filePath = filePath;
    }
    write(s) {
        this.buffer += s;
    }
    async save(rootDir) {
        // just-in-time require so that this file can be loaded in browsers as well.
        // eslint-disable-next-line @typescript-eslint/no-require-imports,@typescript-eslint/no-var-requires
        const fs = require('fs-extra');
        const fullPath = path.join(rootDir, this.filePath);
        await fs.mkdirs(path.dirname(fullPath));
        await fs.writeFile(fullPath, this.buffer);
        return fullPath;
    }
}
exports.default = FileBuffer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZWJ1ZmYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaWxlYnVmZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQUE2QjtBQUU3Qjs7R0FFRztBQUNILE1BQXFCLFVBQVU7SUFJN0IsWUFBbUIsUUFBZ0I7UUFGM0IsV0FBTSxHQUFHLEVBQUUsQ0FBQztRQUdsQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRU0sS0FBSyxDQUFDLENBQVM7UUFDcEIsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVNLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBZTtRQUMvQiw0RUFBNEU7UUFDNUUsb0dBQW9HO1FBQ3BHLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUUvQixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbkQsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN4QyxNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQyxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUF0QkQsNkJBc0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuLyoqXG4gKiBCdWZmZXJzIHRoZSB0ZXh0IG9mIGEgZmlsZSBmb3IgbGF0ZXIgc2F2aW5nLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlQnVmZmVyIHtcbiAgcHVibGljIHJlYWRvbmx5IGZpbGVQYXRoOiBzdHJpbmc7XG4gIHByaXZhdGUgYnVmZmVyID0gJyc7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLmZpbGVQYXRoID0gZmlsZVBhdGg7XG4gIH1cblxuICBwdWJsaWMgd3JpdGUoczogc3RyaW5nKSB7XG4gICAgdGhpcy5idWZmZXIgKz0gcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlKHJvb3REaXI6IHN0cmluZykge1xuICAgIC8vIGp1c3QtaW4tdGltZSByZXF1aXJlIHNvIHRoYXQgdGhpcyBmaWxlIGNhbiBiZSBsb2FkZWQgaW4gYnJvd3NlcnMgYXMgd2VsbC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG4gICAgY29uc3QgZnMgPSByZXF1aXJlKCdmcy1leHRyYScpO1xuXG4gICAgY29uc3QgZnVsbFBhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgdGhpcy5maWxlUGF0aCk7XG4gICAgYXdhaXQgZnMubWtkaXJzKHBhdGguZGlybmFtZShmdWxsUGF0aCkpO1xuICAgIGF3YWl0IGZzLndyaXRlRmlsZShmdWxsUGF0aCwgdGhpcy5idWZmZXIpO1xuICAgIHJldHVybiBmdWxsUGF0aDtcbiAgfVxufVxuIl19
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.snippetKey = void 0;
const crypto = require("crypto");
const record_references_1 = require("../languages/record-references");
const snippet_1 = require("../snippet");
/**
 * Determine the key for a code block
 */
function snippetKey(snippet) {
    const h = crypto.createHash('sha256');
    h.update(String(record_references_1.RecordReferencesVisitor.VERSION));
    // Mix in API location to distinguish between similar snippets
    h.update(snippet_1.renderApiLocation(snippet.location.api));
    h.update(':');
    h.update(snippet.visibleSource);
    return h.digest('hex');
}
exports.snippetKey = snippetKey;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsia2V5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUFpQztBQUVqQyxzRUFBeUU7QUFDekUsd0NBQWtFO0FBRWxFOztHQUVHO0FBQ0gsU0FBZ0IsVUFBVSxDQUFDLE9BQTBCO0lBQ25ELE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsMkNBQXVCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNsRCw4REFBOEQ7SUFDOUQsQ0FBQyxDQUFDLE1BQU0sQ0FBQywyQkFBaUIsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNkLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2hDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBUkQsZ0NBUUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuaW1wb3J0IHsgUmVjb3JkUmVmZXJlbmNlc1Zpc2l0b3IgfSBmcm9tICcuLi9sYW5ndWFnZXMvcmVjb3JkLXJlZmVyZW5jZXMnO1xuaW1wb3J0IHsgVHlwZVNjcmlwdFNuaXBwZXQsIHJlbmRlckFwaUxvY2F0aW9uIH0gZnJvbSAnLi4vc25pcHBldCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSBrZXkgZm9yIGEgY29kZSBibG9ja1xuICovXG5leHBvcnQgZnVuY3Rpb24gc25pcHBldEtleShzbmlwcGV0OiBUeXBlU2NyaXB0U25pcHBldCkge1xuICBjb25zdCBoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpO1xuICBoLnVwZGF0ZShTdHJpbmcoUmVjb3JkUmVmZXJlbmNlc1Zpc2l0b3IuVkVSU0lPTikpO1xuICAvLyBNaXggaW4gQVBJIGxvY2F0aW9uIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gc2ltaWxhciBzbmlwcGV0c1xuICBoLnVwZGF0ZShyZW5kZXJBcGlMb2NhdGlvbihzbmlwcGV0LmxvY2F0aW9uLmFwaSkpO1xuICBoLnVwZGF0ZSgnOicpO1xuICBoLnVwZGF0ZShzbmlwcGV0LnZpc2libGVTb3VyY2UpO1xuICByZXR1cm4gaC5kaWdlc3QoJ2hleCcpO1xufVxuIl19
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.App = exports.TerraformErrors = void 0;
/* eslint-disable no-control-regex */
const react_1 = __importDefault(require("react"));
const terraform_context_1 = require("./terraform-context");
const terraform_context_2 = require("./terraform-context");
const ink_1 = require("ink");
exports.TerraformErrors = ({ children, }) => {
    const { errors } = terraform_context_2.useTerraformState();
    const { exit } = ink_1.useApp();
    if (errors) {
        const errorMessages = errors.map((e) => e.message);
        exit(new Error(errorMessages.join(", ")));
        return react_1.default.createElement(react_1.default.Fragment, null);
    }
    return react_1.default.createElement(react_1.default.Fragment, null, children);
};
exports.App = ({ children, }) => {
    return (react_1.default.createElement(terraform_context_1.TerraformProvider, null,
        react_1.default.createElement(exports.TerraformErrors, null, children)));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxxQ0FBcUM7QUFDckMsa0RBQXlDO0FBQ3pDLDJEQUF3RDtBQUN4RCwyREFBd0Q7QUFDeEQsNkJBQTZCO0FBTWhCLFFBQUEsZUFBZSxHQUFpRCxDQUFDLEVBQzVFLFFBQVEsR0FDWSxFQUFzQixFQUFFO0lBQzVDLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxxQ0FBaUIsRUFBRSxDQUFDO0lBQ3ZDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxZQUFNLEVBQUUsQ0FBQztJQUUxQixJQUFJLE1BQU0sRUFBRTtRQUNWLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsT0FBTyw2REFBSyxDQUFDO0tBQ2Q7SUFFRCxPQUFPLDhEQUFHLFFBQVEsQ0FBSSxDQUFDO0FBQ3pCLENBQUMsQ0FBQztBQUtXLFFBQUEsR0FBRyxHQUFzQyxDQUFDLEVBQ3JELFFBQVEsR0FDQyxFQUFzQixFQUFFO0lBQ2pDLE9BQU8sQ0FDTCw4QkFBQyxxQ0FBaUI7UUFDaEIsOEJBQUMsdUJBQWUsUUFBRSxRQUFRLENBQW1CLENBQzNCLENBQ3JCLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4ICovXG5pbXBvcnQgUmVhY3QsIHsgUmVhY3ROb2RlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUZXJyYWZvcm1Qcm92aWRlciB9IGZyb20gXCIuL3RlcnJhZm9ybS1jb250ZXh0XCI7XG5pbXBvcnQgeyB1c2VUZXJyYWZvcm1TdGF0ZSB9IGZyb20gXCIuL3RlcnJhZm9ybS1jb250ZXh0XCI7XG5pbXBvcnQgeyB1c2VBcHAgfSBmcm9tIFwiaW5rXCI7XG5cbmludGVyZmFjZSBUZXJyYWZvcm1FcnJvclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGNvbnN0IFRlcnJhZm9ybUVycm9yczogUmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8VGVycmFmb3JtRXJyb3JQcm9wcz4gPSAoe1xuICBjaGlsZHJlbixcbn06IFRlcnJhZm9ybUVycm9yUHJvcHMpOiBSZWFjdC5SZWFjdEVsZW1lbnQgPT4ge1xuICBjb25zdCB7IGVycm9ycyB9ID0gdXNlVGVycmFmb3JtU3RhdGUoKTtcbiAgY29uc3QgeyBleGl0IH0gPSB1c2VBcHAoKTtcblxuICBpZiAoZXJyb3JzKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IGVycm9ycy5tYXAoKGU6IGFueSkgPT4gZS5tZXNzYWdlKTtcbiAgICBleGl0KG5ldyBFcnJvcihlcnJvck1lc3NhZ2VzLmpvaW4oXCIsIFwiKSkpO1xuICAgIHJldHVybiA8PjwvPjtcbiAgfVxuXG4gIHJldHVybiA8PntjaGlsZHJlbn08Lz47XG59O1xuXG5pbnRlcmZhY2UgQXBwUHJvcHMge1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbn1cbmV4cG9ydCBjb25zdCBBcHA6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PEFwcFByb3BzPiA9ICh7XG4gIGNoaWxkcmVuLFxufTogQXBwUHJvcHMpOiBSZWFjdC5SZWFjdEVsZW1lbnQgPT4ge1xuICByZXR1cm4gKFxuICAgIDxUZXJyYWZvcm1Qcm92aWRlcj5cbiAgICAgIDxUZXJyYWZvcm1FcnJvcnM+e2NoaWxkcmVufTwvVGVycmFmb3JtRXJyb3JzPlxuICAgIDwvVGVycmFmb3JtUHJvdmlkZXI+XG4gICk7XG59O1xuIl19
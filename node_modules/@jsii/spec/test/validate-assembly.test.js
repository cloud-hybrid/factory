"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
const validate_assembly_1 = require("../lib/validate-assembly");
test('rejects invalid assembly', () => expect(() => validate_assembly_1.validateAssembly({})).toThrow(/Invalid assembly:/));
describe('can load older assemblies', () => {
    const samplesDir = path_1.resolve(__dirname, 'previous-assemblies');
    for (const sample of fs_1.readdirSync(samplesDir)) {
        test(sample, () => {
            const data = JSON.parse(fs_1.readFileSync(path_1.resolve(samplesDir, sample), { encoding: 'utf-8' }));
            expect(validate_assembly_1.validateAssembly(data)).toBe(data);
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGUtYXNzZW1ibHkudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZhbGlkYXRlLWFzc2VtYmx5LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQkFBK0M7QUFDL0MsK0JBQStCO0FBRS9CLGdFQUE0RDtBQUU1RCxJQUFJLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFLENBQ3BDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxvQ0FBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7QUFFbkUsUUFBUSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUN6QyxNQUFNLFVBQVUsR0FBRyxjQUFPLENBQUMsU0FBUyxFQUFFLHFCQUFxQixDQUFDLENBQUM7SUFDN0QsS0FBSyxNQUFNLE1BQU0sSUFBSSxnQkFBVyxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQzVDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1lBQ2hCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQ3JCLGlCQUFZLENBQUMsY0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUNqRSxDQUFDO1lBQ0YsTUFBTSxDQUFDLG9DQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO0tBQ0o7QUFDSCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRGaWxlU3luYywgcmVhZGRpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7IHZhbGlkYXRlQXNzZW1ibHkgfSBmcm9tICcuLi9saWIvdmFsaWRhdGUtYXNzZW1ibHknO1xuXG50ZXN0KCdyZWplY3RzIGludmFsaWQgYXNzZW1ibHknLCAoKSA9PlxuICBleHBlY3QoKCkgPT4gdmFsaWRhdGVBc3NlbWJseSh7fSkpLnRvVGhyb3coL0ludmFsaWQgYXNzZW1ibHk6LykpO1xuXG5kZXNjcmliZSgnY2FuIGxvYWQgb2xkZXIgYXNzZW1ibGllcycsICgpID0+IHtcbiAgY29uc3Qgc2FtcGxlc0RpciA9IHJlc29sdmUoX19kaXJuYW1lLCAncHJldmlvdXMtYXNzZW1ibGllcycpO1xuICBmb3IgKGNvbnN0IHNhbXBsZSBvZiByZWFkZGlyU3luYyhzYW1wbGVzRGlyKSkge1xuICAgIHRlc3Qoc2FtcGxlLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShcbiAgICAgICAgcmVhZEZpbGVTeW5jKHJlc29sdmUoc2FtcGxlc0Rpciwgc2FtcGxlKSwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QodmFsaWRhdGVBc3NlbWJseShkYXRhKSkudG9CZShkYXRhKTtcbiAgICB9KTtcbiAgfVxufSk7XG4iXX0=
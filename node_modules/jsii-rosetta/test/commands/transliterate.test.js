"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const spec_1 = require("@jsii/spec");
const fs = require("fs-extra");
const jsii = require("jsii");
const path = require("path");
const transliterate_1 = require("../../lib/commands/transliterate");
const target_language_1 = require("../../lib/languages/target-language");
const testutil_1 = require("../testutil");
jest.setTimeout(60000);
test('single assembly, all languages', () => testutil_1.withTemporaryDirectory(async (tmpDir) => {
    // GIVEN
    const compilationResult = await jsii.compileJsiiForTest({
        'README.md': `
# README
\`\`\`ts
const object: IInterface = new ClassName('this', 1337, { foo: 'bar' });
object.property = EnumType.OPTION_A;
object.methodCall();

ClassName.staticMethod(EnumType.OPTION_B);
\`\`\`
`,
        'index.ts': `
/**
 * @example new ClassName('this', 1337, { property: EnumType.OPTION_B });
 */
export enum EnumType {
  /**
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_A });
   */
  OPTION_A = 1,

  /**
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_B });
   */
  OPTION_B = 2,
}

export interface IInterface {
  /**
   * A property value.
   *
   * @example
   *    iface.property = EnumType.OPTION_B;
   */
  property: EnumType;

  /**
   * An instance method call.
   *
   * @example
   *    iface.methodCall();
   */
  methodCall(): void;
}

export interface ClassNameProps {
  readonly property?: EnumType;
  readonly foo?: string;
}

export class ClassName implements IInterface {
  /**
   * A static method. It can be invoked easily.
   *
   * @example ClassName.staticMethod();
   */
  public static staticMethod(_enm?: EnumType): void {
    // ...
  }

  public property: EnumType;

  /**
   * Create a new instance of ClassName.
   *
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_B });
   */
  public constructor(_this: string, _elite: number, props: ClassNameProps) {
    this.property = props.property ?? EnumType.OPTION_A;
  }

  public methodCall(): void {
    // ...
  }
}`,
    });
    fs.writeJsonSync(path.join(tmpDir, spec_1.SPEC_FILE_NAME), compilationResult.assembly, {
        spaces: 2,
    });
    for (const [file, content] of Object.entries(compilationResult.files)) {
        fs.writeFileSync(path.resolve(tmpDir, file), content, 'utf-8');
    }
    fs.mkdirSync(path.resolve(tmpDir, 'rosetta'));
    fs.writeFileSync(path.resolve(tmpDir, 'rosetta', 'default.ts-fixture'), `import { EnumType, IInterface, ClassName } from '.';\ndeclare const iface: IInterface\n/// here`, 'utf-8');
    // WHEN
    await expect(transliterate_1.transliterateAssembly([tmpDir], Object.values(target_language_1.TargetLanguage), {
        strict: true,
    })).resolves.not.toThrow();
    // THEN
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.csharp`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# README

      \`\`\`csharp
      // This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      IInterface object = new ClassName(\\"this\\", 1337, new ClassNameProps { Foo = \\"bar\\" });
      object.Property = EnumType.OPTION_A;
      object.MethodCall();

      ClassName.StaticMethod(EnumType.OPTION_B);
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.ClassName": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.ClassName",
            "initializer": Object {
              "docs": Object {
                "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps { Property = EnumType.OPTION_B });",
                "summary": "Create a new instance of ClassName.",
              },
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 57,
              },
              "parameters": Array [
                Object {
                  "name": "_this",
                  "type": Object {
                    "primitive": "string",
                  },
                },
                Object {
                  "name": "_elite",
                  "type": Object {
                    "primitive": "number",
                  },
                },
                Object {
                  "name": "props",
                  "type": Object {
                    "fqn": "testpkg.ClassNameProps",
                  },
                },
              ],
            },
            "interfaces": Array [
              "testpkg.IInterface",
            ],
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 40,
            },
            "methods": Array [
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      ClassName.StaticMethod();",
                  "remarks": "It can be invoked easily.",
                  "summary": "A static method.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 46,
                },
                "name": "staticMethod",
                "parameters": Array [
                  Object {
                    "name": "_enm",
                    "optional": true,
                    "type": Object {
                      "fqn": "testpkg.EnumType",
                    },
                  },
                ],
                "static": true,
              },
              Object {
                "docs": Object {
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 61,
                },
                "name": "methodCall",
                "overrides": "testpkg.IInterface",
              },
            ],
            "name": "ClassName",
            "properties": Array [
              Object {
                "docs": Object {
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 50,
                },
                "name": "property",
                "overrides": "testpkg.IInterface",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassName",
          },
          "testpkg.ClassNameProps": Object {
            "assembly": "testpkg",
            "datatype": true,
            "fqn": "testpkg.ClassNameProps",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 35,
            },
            "name": "ClassNameProps",
            "properties": Array [
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 37,
                },
                "name": "foo",
                "optional": true,
                "type": Object {
                  "primitive": "string",
                },
              },
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 36,
                },
                "name": "property",
                "optional": true,
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassNameProps",
          },
          "testpkg.EnumType": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps { Property = EnumType.OPTION_B });",
            },
            "fqn": "testpkg.EnumType",
            "kind": "enum",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 5,
            },
            "members": Array [
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps { Property = EnumType.OPTION_A });",
                },
                "name": "OPTION_A",
              },
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps { Property = EnumType.OPTION_B });",
                },
                "name": "OPTION_B",
              },
            ],
            "name": "EnumType",
            "symbolId": "index:EnumType",
          },
          "testpkg.IInterface": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.IInterface",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 17,
            },
            "methods": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      iface.MethodCall();",
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 32,
                },
                "name": "methodCall",
              },
            ],
            "name": "IInterface",
            "properties": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      iface.Property = EnumType.OPTION_B;",
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 24,
                },
                "name": "property",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:IInterface",
          },
        },
        "version": "0.0.1",
      }
    `);
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.java`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# README

      \`\`\`java
      // This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      IInterface object = new ClassName(\\"this\\", 1337, new ClassNameProps().foo(\\"bar\\"));
      object.getProperty() = EnumType.OPTION_A;
      object.methodCall();

      ClassName.staticMethod(EnumType.OPTION_B);
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.ClassName": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.ClassName",
            "initializer": Object {
              "docs": Object {
                "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps().property(EnumType.OPTION_B));",
                "summary": "Create a new instance of ClassName.",
              },
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 57,
              },
              "parameters": Array [
                Object {
                  "name": "_this",
                  "type": Object {
                    "primitive": "string",
                  },
                },
                Object {
                  "name": "_elite",
                  "type": Object {
                    "primitive": "number",
                  },
                },
                Object {
                  "name": "props",
                  "type": Object {
                    "fqn": "testpkg.ClassNameProps",
                  },
                },
              ],
            },
            "interfaces": Array [
              "testpkg.IInterface",
            ],
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 40,
            },
            "methods": Array [
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      ClassName.staticMethod();",
                  "remarks": "It can be invoked easily.",
                  "summary": "A static method.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 46,
                },
                "name": "staticMethod",
                "parameters": Array [
                  Object {
                    "name": "_enm",
                    "optional": true,
                    "type": Object {
                      "fqn": "testpkg.EnumType",
                    },
                  },
                ],
                "static": true,
              },
              Object {
                "docs": Object {
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 61,
                },
                "name": "methodCall",
                "overrides": "testpkg.IInterface",
              },
            ],
            "name": "ClassName",
            "properties": Array [
              Object {
                "docs": Object {
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 50,
                },
                "name": "property",
                "overrides": "testpkg.IInterface",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassName",
          },
          "testpkg.ClassNameProps": Object {
            "assembly": "testpkg",
            "datatype": true,
            "fqn": "testpkg.ClassNameProps",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 35,
            },
            "name": "ClassNameProps",
            "properties": Array [
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 37,
                },
                "name": "foo",
                "optional": true,
                "type": Object {
                  "primitive": "string",
                },
              },
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 36,
                },
                "name": "property",
                "optional": true,
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassNameProps",
          },
          "testpkg.EnumType": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps().property(EnumType.OPTION_B));",
            },
            "fqn": "testpkg.EnumType",
            "kind": "enum",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 5,
            },
            "members": Array [
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps().property(EnumType.OPTION_A));",
                },
                "name": "OPTION_A",
              },
              Object {
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new ClassName(\\"this\\", 1337, new ClassNameProps().property(EnumType.OPTION_B));",
                },
                "name": "OPTION_B",
              },
            ],
            "name": "EnumType",
            "symbolId": "index:EnumType",
          },
          "testpkg.IInterface": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.IInterface",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 17,
            },
            "methods": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      iface.methodCall();",
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 32,
                },
                "name": "methodCall",
              },
            ],
            "name": "IInterface",
            "properties": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "// This example was automatically transliterated.
      // See https://github.com/aws/jsii/issues/826 for more information.

      iface.getProperty() = EnumType.OPTION_B;",
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 24,
                },
                "name": "property",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:IInterface",
          },
        },
        "version": "0.0.1",
      }
    `);
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.python`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# README

      \`\`\`python
      # This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      object = ClassName(\\"this\\", 1337, foo=\\"bar\\")
      object.property = EnumType.OPTION_A
      object.method_call()

      ClassName.static_method(EnumType.OPTION_B)
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.ClassName": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.ClassName",
            "initializer": Object {
              "docs": Object {
                "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      ClassName(\\"this\\", 1337, property=EnumType.OPTION_B)",
                "summary": "Create a new instance of ClassName.",
              },
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 57,
              },
              "parameters": Array [
                Object {
                  "name": "_this",
                  "type": Object {
                    "primitive": "string",
                  },
                },
                Object {
                  "name": "_elite",
                  "type": Object {
                    "primitive": "number",
                  },
                },
                Object {
                  "name": "props",
                  "type": Object {
                    "fqn": "testpkg.ClassNameProps",
                  },
                },
              ],
            },
            "interfaces": Array [
              "testpkg.IInterface",
            ],
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 40,
            },
            "methods": Array [
              Object {
                "docs": Object {
                  "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      ClassName.static_method()",
                  "remarks": "It can be invoked easily.",
                  "summary": "A static method.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 46,
                },
                "name": "staticMethod",
                "parameters": Array [
                  Object {
                    "name": "_enm",
                    "optional": true,
                    "type": Object {
                      "fqn": "testpkg.EnumType",
                    },
                  },
                ],
                "static": true,
              },
              Object {
                "docs": Object {
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 61,
                },
                "name": "methodCall",
                "overrides": "testpkg.IInterface",
              },
            ],
            "name": "ClassName",
            "properties": Array [
              Object {
                "docs": Object {
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 50,
                },
                "name": "property",
                "overrides": "testpkg.IInterface",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassName",
          },
          "testpkg.ClassNameProps": Object {
            "assembly": "testpkg",
            "datatype": true,
            "fqn": "testpkg.ClassNameProps",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 35,
            },
            "name": "ClassNameProps",
            "properties": Array [
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 37,
                },
                "name": "foo",
                "optional": true,
                "type": Object {
                  "primitive": "string",
                },
              },
              Object {
                "abstract": true,
                "immutable": true,
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 36,
                },
                "name": "property",
                "optional": true,
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:ClassNameProps",
          },
          "testpkg.EnumType": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      ClassName(\\"this\\", 1337, property=EnumType.OPTION_B)",
            },
            "fqn": "testpkg.EnumType",
            "kind": "enum",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 5,
            },
            "members": Array [
              Object {
                "docs": Object {
                  "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      ClassName(\\"this\\", 1337, property=EnumType.OPTION_A)",
                },
                "name": "OPTION_A",
              },
              Object {
                "docs": Object {
                  "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      ClassName(\\"this\\", 1337, property=EnumType.OPTION_B)",
                },
                "name": "OPTION_B",
              },
            ],
            "name": "EnumType",
            "symbolId": "index:EnumType",
          },
          "testpkg.IInterface": Object {
            "assembly": "testpkg",
            "fqn": "testpkg.IInterface",
            "kind": "interface",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 17,
            },
            "methods": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      iface.method_call()",
                  "summary": "An instance method call.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 32,
                },
                "name": "methodCall",
              },
            ],
            "name": "IInterface",
            "properties": Array [
              Object {
                "abstract": true,
                "docs": Object {
                  "example": "# This example was automatically transliterated.
      # See https://github.com/aws/jsii/issues/826 for more information.

      iface.property = EnumType.OPTION_B",
                  "summary": "A property value.",
                },
                "locationInModule": Object {
                  "filename": "index.ts",
                  "line": 24,
                },
                "name": "property",
                "type": Object {
                  "fqn": "testpkg.EnumType",
                },
              },
            ],
            "symbolId": "index:IInterface",
          },
        },
        "version": "0.0.1",
      }
    `);
}));
test('single assembly, loose mode', () => testutil_1.withTemporaryDirectory(async (tmpDir) => {
    // GIVEN
    const compilationResult = await jsii.compileJsiiForTest({
        'README.md': `
# Missing literate source

[ts source is not found](missing-example.lit.ts)

# Missing literate source and fallback

[example is not found](omit-example.lit.ts)

# Missing fixture

\`\`\`ts fixture=not-found
new SampleClass('README.md');
\`\`\`
`,
        'index.ts': `
/**
 * @example
 *   /// fixture=not-found
 *   new DoesNotCompile(this, 'That', { foo: 1337 });
 */
export class SampleClass {
  public constructor(_source: string){ }
}
`,
        // The `lit.ts` source file will not be there in packaged form...
        'missing-example.lit.ts': `
import { SampleClass } from './index';

/// !show
/// ## This is a heading within the literate file!
new SampleClass('literate');
      `,
        // The `lit.ts`  source file and `lit.js` output will not be there in packaged form...
        'omit-example.lit.ts': `
import { SampleClass } from './index';

/// !show
/// ## This is a heading within the omitted literate file!
new SampleClass('omitted-literate');
      `,
    });
    fs.writeJsonSync(path.join(tmpDir, spec_1.SPEC_FILE_NAME), compilationResult.assembly, {
        spaces: 2,
    });
    for (const [file, content] of Object.entries(compilationResult.files)) {
        if (file.startsWith('omit-')) {
            continue;
        }
        fs.writeFileSync(path.resolve(tmpDir, file), content, 'utf-8');
    }
    // WHEN
    await expect(transliterate_1.transliterateAssembly([tmpDir], Object.values(target_language_1.TargetLanguage), {
        loose: true,
    })).resolves.not.toThrow();
    // THEN
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.csharp`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# Missing literate source

      ## This is a heading within the literate file!

      \`\`\`csharp
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"literate\\");
      \`\`\`

      # Missing literate source and fallback

      ## This is a heading within the omitted literate file!

      \`\`\`csharp
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"omitted-literate\\");
      \`\`\`

      # Missing fixture

      \`\`\`csharp
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"README.md\\");
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.SampleClass": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "// This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new DoesNotCompile(this, \\"That\\", new Struct { Foo = 1337 });",
            },
            "fqn": "testpkg.SampleClass",
            "initializer": Object {
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 8,
              },
              "parameters": Array [
                Object {
                  "name": "_source",
                  "type": Object {
                    "primitive": "string",
                  },
                },
              ],
            },
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 7,
            },
            "name": "SampleClass",
            "symbolId": "index:SampleClass",
          },
        },
        "version": "0.0.1",
      }
    `);
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.java`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# Missing literate source

      ## This is a heading within the literate file!

      \`\`\`java
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"literate\\");
      \`\`\`

      # Missing literate source and fallback

      ## This is a heading within the omitted literate file!

      \`\`\`java
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"omitted-literate\\");
      \`\`\`

      # Missing fixture

      \`\`\`java
      // This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      new SampleClass(\\"README.md\\");
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.SampleClass": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "// This example was automatically transliterated with incomplete type information. It may not work as-is.
      // See https://github.com/aws/jsii/issues/826 for more information.

      DoesNotCompile.Builder.create(this, \\"That\\").foo(1337).build();",
            },
            "fqn": "testpkg.SampleClass",
            "initializer": Object {
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 8,
              },
              "parameters": Array [
                Object {
                  "name": "_source",
                  "type": Object {
                    "primitive": "string",
                  },
                },
              ],
            },
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 7,
            },
            "name": "SampleClass",
            "symbolId": "index:SampleClass",
          },
        },
        "version": "0.0.1",
      }
    `);
    expect(fs.readJsonSync(path.join(tmpDir, `${spec_1.SPEC_FILE_NAME}.python`))).toMatchInlineSnapshot({
        fingerprint: expect.any(String),
        jsiiVersion: expect.any(String),
    }, `
      Object {
        "author": Object {
          "name": "John Doe",
          "roles": Array [
            "author",
          ],
        },
        "description": "testpkg",
        "fingerprint": Any<String>,
        "homepage": "https://github.com/aws/jsii.git",
        "jsiiVersion": Any<String>,
        "license": "Apache-2.0",
        "metadata": Object {
          "jsii": Object {
            "pacmak": Object {
              "hasDefaultInterfaces": true,
            },
          },
        },
        "name": "testpkg",
        "readme": Object {
          "markdown": "# Missing literate source

      ## This is a heading within the literate file!

      \`\`\`python
      # This example was automatically transliterated with incomplete type information. It may not work as-is.
      # See https://github.com/aws/jsii/issues/826 for more information.

      SampleClass(\\"literate\\")
      \`\`\`

      # Missing literate source and fallback

      ## This is a heading within the omitted literate file!

      \`\`\`python
      # This example was automatically transliterated with incomplete type information. It may not work as-is.
      # See https://github.com/aws/jsii/issues/826 for more information.

      SampleClass(\\"omitted-literate\\")
      \`\`\`

      # Missing fixture

      \`\`\`python
      # This example was automatically transliterated with incomplete type information. It may not work as-is.
      # See https://github.com/aws/jsii/issues/826 for more information.

      SampleClass(\\"README.md\\")
      \`\`\`",
        },
        "repository": Object {
          "type": "git",
          "url": "https://github.com/aws/jsii.git",
        },
        "schema": "jsii/0.10.0",
        "targets": Object {
          "js": Object {
            "npm": "testpkg",
          },
        },
        "types": Object {
          "testpkg.SampleClass": Object {
            "assembly": "testpkg",
            "docs": Object {
              "example": "# This example was automatically transliterated with incomplete type information. It may not work as-is.
      # See https://github.com/aws/jsii/issues/826 for more information.

      DoesNotCompile(self, \\"That\\", foo=1337)",
            },
            "fqn": "testpkg.SampleClass",
            "initializer": Object {
              "locationInModule": Object {
                "filename": "index.ts",
                "line": 8,
              },
              "parameters": Array [
                Object {
                  "name": "_source",
                  "type": Object {
                    "primitive": "string",
                  },
                },
              ],
            },
            "kind": "class",
            "locationInModule": Object {
              "filename": "index.ts",
              "line": 7,
            },
            "name": "SampleClass",
            "symbolId": "index:SampleClass",
          },
        },
        "version": "0.0.1",
      }
    `);
}));
test('single assembly with example metadata', () => testutil_1.withTemporaryDirectory(async (tmpDir) => {
    // GIVEN
    const compilationResult = await jsii.compileJsiiForTest({
        'index.ts': `
/**
 * @exampleMetadata fixture=custom
 * @example
 * const object: IInterface = new ClassName('this', 1337, { foo: 'bar' });
 * object.property = EnumType.OPTION_A;
 * object.methodCall();
 */
export enum EnumType {
  /**
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_A });
   */
  OPTION_A = 1,

  /**
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_B });
   */
  OPTION_B = 2,
}

export interface IInterface {
  /**
   * A property value.
   *
   * @exampleMetadata nofixture
   * @example
   * import { EnumType, IInterface, ClassName } from '.';
   * declare const iface: IInterface;
   * iface.property = EnumType.OPTION_A;
   */
  property: EnumType;

  /**
   * An instance method call.
   *
   * @example
   *    iface.methodCall();
   */
  methodCall(): void;
}

export interface ClassNameProps {
  readonly property?: EnumType;
  readonly foo?: string;
}

export class ClassName implements IInterface {
  /**
   * A static method. It can be invoked easily.
   *
   * @example ClassName.staticMethod();
   */
  public static staticMethod(_enm?: EnumType): void {
    // ...
  }

  public property: EnumType;

  /**
   * Create a new instance of ClassName.
   *
   * @example new ClassName('this', 1337, { property: EnumType.OPTION_B });
   */
  public constructor(_this: string, _elite: number, props: ClassNameProps) {
    this.property = props.property ?? EnumType.OPTION_A;
  }

  public methodCall(): void {
    // ...
  }
}`,
    });
    fs.writeJsonSync(path.join(tmpDir, spec_1.SPEC_FILE_NAME), compilationResult.assembly, {
        spaces: 2,
    });
    for (const [file, content] of Object.entries(compilationResult.files)) {
        fs.writeFileSync(path.resolve(tmpDir, file), content, 'utf-8');
    }
    fs.mkdirSync(path.resolve(tmpDir, 'rosetta'));
    fs.writeFileSync(path.resolve(tmpDir, 'rosetta', 'default.ts-fixture'), `import { EnumType, IInterface, ClassName } from '.';\ndeclare const iface: IInterface;\n/// here`, 'utf-8');
    fs.writeFileSync(path.resolve(tmpDir, 'rosetta', 'custom.ts-fixture'), `import { EnumType, IInterface, ClassName } from '.';/// here`, 'utf-8');
    // THEN
    await expect(transliterate_1.transliterateAssembly([tmpDir], Object.values(target_language_1.TargetLanguage), {
        strict: true,
    })).resolves.not.toThrow();
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsaXRlcmF0ZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHJhbnNsaXRlcmF0ZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQTRDO0FBQzVDLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0IsNkJBQTZCO0FBRTdCLG9FQUF5RTtBQUN6RSx5RUFBcUU7QUFDckUsMENBQXFEO0FBRXJELElBQUksQ0FBQyxVQUFVLENBQUMsS0FBTSxDQUFDLENBQUM7QUFFeEIsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRSxDQUMxQyxpQ0FBc0IsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUU7SUFDdEMsUUFBUTtJQUNSLE1BQU0saUJBQWlCLEdBQUcsTUFBTSxJQUFJLENBQUMsa0JBQWtCLENBQUM7UUFDdEQsV0FBVyxFQUFFOzs7Ozs7Ozs7Q0FTbEI7UUFDSyxVQUFVLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQStEaEI7S0FDRyxDQUFDLENBQUM7SUFDSCxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLHFCQUFjLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxRQUFRLEVBQUU7UUFDOUUsTUFBTSxFQUFFLENBQUM7S0FDVixDQUFDLENBQUM7SUFDSCxLQUFLLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNyRSxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNoRTtJQUNELEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUs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QUNGLEVBQUUsQ0FBQyxhQUFhLENBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLG1CQUFtQixDQUFDLEVBQ3BELDhEQUE4RCxFQUM5RCxPQUFPLENBQ1IsQ0FBQztJQUVGLE9BQU87SUFDUCxNQUFNLE1BQU0sQ0FDVixxQ0FBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsZ0NBQWMsQ0FBQyxFQUFFO1FBQzdELE1BQU0sRUFBRSxJQUFJO0tBQ2IsQ0FBQyxDQUNILENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMzQixDQUFDLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU1BFQ19GSUxFX05BTUUgfSBmcm9tICdAanNpaS9zcGVjJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIGpzaWkgZnJvbSAnanNpaSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgeyB0cmFuc2xpdGVyYXRlQXNzZW1ibHkgfSBmcm9tICcuLi8uLi9saWIvY29tbWFuZHMvdHJhbnNsaXRlcmF0ZSc7XG5pbXBvcnQgeyBUYXJnZXRMYW5ndWFnZSB9IGZyb20gJy4uLy4uL2xpYi9sYW5ndWFnZXMvdGFyZ2V0LWxhbmd1YWdlJztcbmltcG9ydCB7IHdpdGhUZW1wb3JhcnlEaXJlY3RvcnkgfSBmcm9tICcuLi90ZXN0dXRpbCc7XG5cbmplc3Quc2V0VGltZW91dCg2MF8wMDApO1xuXG50ZXN0KCdzaW5nbGUgYXNzZW1ibHksIGFsbCBsYW5ndWFnZXMnLCAoKSA9PlxuICB3aXRoVGVtcG9yYXJ5RGlyZWN0b3J5KGFzeW5jICh0bXBEaXIpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IGNvbXBpbGF0aW9uUmVzdWx0ID0gYXdhaXQganNpaS5jb21waWxlSnNpaUZvclRlc3Qoe1xuICAgICAgJ1JFQURNRS5tZCc6IGBcbiMgUkVBRE1FXG5cXGBcXGBcXGB0c1xuY29uc3Qgb2JqZWN0OiBJSW50ZXJmYWNlID0gbmV3IENsYXNzTmFtZSgndGhpcycsIDEzMzcsIHsgZm9vOiAnYmFyJyB9KTtcbm9iamVjdC5wcm9wZXJ0eSA9IEVudW1UeXBlLk9QVElPTl9BO1xub2JqZWN0Lm1ldGhvZENhbGwoKTtcblxuQ2xhc3NOYW1lLnN0YXRpY01ldGhvZChFbnVtVHlwZS5PUFRJT05fQik7XG5cXGBcXGBcXGBcbmAsXG4gICAgICAnaW5kZXgudHMnOiBgXG4vKipcbiAqIEBleGFtcGxlIG5ldyBDbGFzc05hbWUoJ3RoaXMnLCAxMzM3LCB7IHByb3BlcnR5OiBFbnVtVHlwZS5PUFRJT05fQiB9KTtcbiAqL1xuZXhwb3J0IGVudW0gRW51bVR5cGUge1xuICAvKipcbiAgICogQGV4YW1wbGUgbmV3IENsYXNzTmFtZSgndGhpcycsIDEzMzcsIHsgcHJvcGVydHk6IEVudW1UeXBlLk9QVElPTl9BIH0pO1xuICAgKi9cbiAgT1BUSU9OX0EgPSAxLFxuXG4gIC8qKlxuICAgKiBAZXhhbXBsZSBuZXcgQ2xhc3NOYW1lKCd0aGlzJywgMTMzNywgeyBwcm9wZXJ0eTogRW51bVR5cGUuT1BUSU9OX0IgfSk7XG4gICAqL1xuICBPUFRJT05fQiA9IDIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBBIHByb3BlcnR5IHZhbHVlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgICBpZmFjZS5wcm9wZXJ0eSA9IEVudW1UeXBlLk9QVElPTl9CO1xuICAgKi9cbiAgcHJvcGVydHk6IEVudW1UeXBlO1xuXG4gIC8qKlxuICAgKiBBbiBpbnN0YW5jZSBtZXRob2QgY2FsbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICAgaWZhY2UubWV0aG9kQ2FsbCgpO1xuICAgKi9cbiAgbWV0aG9kQ2FsbCgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXNzTmFtZVByb3BzIHtcbiAgcmVhZG9ubHkgcHJvcGVydHk/OiBFbnVtVHlwZTtcbiAgcmVhZG9ubHkgZm9vPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ2xhc3NOYW1lIGltcGxlbWVudHMgSUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBBIHN0YXRpYyBtZXRob2QuIEl0IGNhbiBiZSBpbnZva2VkIGVhc2lseS5cbiAgICpcbiAgICogQGV4YW1wbGUgQ2xhc3NOYW1lLnN0YXRpY01ldGhvZCgpO1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzdGF0aWNNZXRob2QoX2VubT86IEVudW1UeXBlKTogdm9pZCB7XG4gICAgLy8gLi4uXG4gIH1cblxuICBwdWJsaWMgcHJvcGVydHk6IEVudW1UeXBlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQ2xhc3NOYW1lLlxuICAgKlxuICAgKiBAZXhhbXBsZSBuZXcgQ2xhc3NOYW1lKCd0aGlzJywgMTMzNywgeyBwcm9wZXJ0eTogRW51bVR5cGUuT1BUSU9OX0IgfSk7XG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoX3RoaXM6IHN0cmluZywgX2VsaXRlOiBudW1iZXIsIHByb3BzOiBDbGFzc05hbWVQcm9wcykge1xuICAgIHRoaXMucHJvcGVydHkgPSBwcm9wcy5wcm9wZXJ0eSA/PyBFbnVtVHlwZS5PUFRJT05fQTtcbiAgfVxuXG4gIHB1YmxpYyBtZXRob2RDYWxsKCk6IHZvaWQge1xuICAgIC8vIC4uLlxuICB9XG59YCxcbiAgICB9KTtcbiAgICBmcy53cml0ZUpzb25TeW5jKHBhdGguam9pbih0bXBEaXIsIFNQRUNfRklMRV9OQU1FKSwgY29tcGlsYXRpb25SZXN1bHQuYXNzZW1ibHksIHtcbiAgICAgIHNwYWNlczogMixcbiAgICB9KTtcbiAgICBmb3IgKGNvbnN0IFtmaWxlLCBjb250ZW50XSBvZiBPYmplY3QuZW50cmllcyhjb21waWxhdGlvblJlc3VsdC5maWxlcykpIHtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5yZXNvbHZlKHRtcERpciwgZmlsZSksIGNvbnRlbnQsICd1dGYtOCcpO1xuICAgIH1cbiAgICBmcy5ta2RpclN5bmMocGF0aC5yZXNvbHZlKHRtcERpciwgJ3Jvc2V0dGEnKSk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhcbiAgICAgIHBhdGgucmVzb2x2ZSh0bXBEaXIsICdyb3NldHRhJywgJ2RlZmF1bHQudHMtZml4dHVyZScpLFxuICAgICAgYGltcG9ydCB7IEVudW1UeXBlLCBJSW50ZXJmYWNlLCBDbGFzc05hbWUgfSBmcm9tICcuJztcXG5kZWNsYXJlIGNvbnN0IGlmYWNlOiBJSW50ZXJmYWNlXFxuLy8vIGhlcmVgLFxuICAgICAgJ3V0Zi04JyxcbiAgICApO1xuXG4gICAgLy8gV0hFTlxuICAgIGF3YWl0IGV4cGVjdChcbiAgICAgIHRyYW5zbGl0ZXJhdGVBc3NlbWJseShbdG1wRGlyXSwgT2JqZWN0LnZhbHVlcyhUYXJnZXRMYW5ndWFnZSksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgfSksXG4gICAgKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdChmcy5yZWFkSnNvblN5bmMocGF0aC5qb2luKHRtcERpciwgYCR7U1BFQ19GSUxFX05BTUV9LmNzaGFycGApKSkudG9NYXRjaElubGluZVNuYXBzaG90KFxuICAgICAge1xuICAgICAgICBmaW5nZXJwcmludDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICBqc2lpVmVyc2lvbjogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgfSxcbiAgICAgIGBcbiAgICAgIE9iamVjdCB7XG4gICAgICAgIFwiYXV0aG9yXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJuYW1lXCI6IFwiSm9obiBEb2VcIixcbiAgICAgICAgICBcInJvbGVzXCI6IEFycmF5IFtcbiAgICAgICAgICAgIFwiYXV0aG9yXCIsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJmaW5nZXJwcmludFwiOiBBbnk8U3RyaW5nPixcbiAgICAgICAgXCJob21lcGFnZVwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS5naXRcIixcbiAgICAgICAgXCJqc2lpVmVyc2lvblwiOiBBbnk8U3RyaW5nPixcbiAgICAgICAgXCJsaWNlbnNlXCI6IFwiQXBhY2hlLTIuMFwiLFxuICAgICAgICBcIm1ldGFkYXRhXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJqc2lpXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcInBhY21ha1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImhhc0RlZmF1bHRJbnRlcmZhY2VzXCI6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwibmFtZVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJyZWFkbWVcIjogT2JqZWN0IHtcbiAgICAgICAgICBcIm1hcmtkb3duXCI6IFwiIyBSRUFETUVcblxuICAgICAgXFxgXFxgXFxgY3NoYXJwXG4gICAgICAvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIElJbnRlcmZhY2Ugb2JqZWN0ID0gbmV3IENsYXNzTmFtZShcXFxcXCJ0aGlzXFxcXFwiLCAxMzM3LCBuZXcgQ2xhc3NOYW1lUHJvcHMgeyBGb28gPSBcXFxcXCJiYXJcXFxcXCIgfSk7XG4gICAgICBvYmplY3QuUHJvcGVydHkgPSBFbnVtVHlwZS5PUFRJT05fQTtcbiAgICAgIG9iamVjdC5NZXRob2RDYWxsKCk7XG5cbiAgICAgIENsYXNzTmFtZS5TdGF0aWNNZXRob2QoRW51bVR5cGUuT1BUSU9OX0IpO1xuICAgICAgXFxgXFxgXFxgXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwicmVwb3NpdG9yeVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgICAgICAgIFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpLmdpdFwiLFxuICAgICAgICB9LFxuICAgICAgICBcInNjaGVtYVwiOiBcImpzaWkvMC4xMC4wXCIsXG4gICAgICAgIFwidGFyZ2V0c1wiOiBPYmplY3Qge1xuICAgICAgICAgIFwianNcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwibnBtXCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwidHlwZXNcIjogT2JqZWN0IHtcbiAgICAgICAgICBcInRlc3Rwa2cuQ2xhc3NOYW1lXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkNsYXNzTmFtZVwiLFxuICAgICAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBDbGFzc05hbWUoXFxcXFwidGhpc1xcXFxcIiwgMTMzNywgbmV3IENsYXNzTmFtZVByb3BzIHsgUHJvcGVydHkgPSBFbnVtVHlwZS5PUFRJT05fQiB9KTtcIixcbiAgICAgICAgICAgICAgICBcInN1bW1hcnlcIjogXCJDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQ2xhc3NOYW1lLlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICBcImxpbmVcIjogNTcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIl90aGlzXCIsXG4gICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiX2VsaXRlXCIsXG4gICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicHJvcHNcIixcbiAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuQ2xhc3NOYW1lUHJvcHNcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImludGVyZmFjZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBcInRlc3Rwa2cuSUludGVyZmFjZVwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiA0MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1ldGhvZHNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBDbGFzc05hbWUuU3RhdGljTWV0aG9kKCk7XCIsXG4gICAgICAgICAgICAgICAgICBcInJlbWFya3NcIjogXCJJdCBjYW4gYmUgaW52b2tlZCBlYXNpbHkuXCIsXG4gICAgICAgICAgICAgICAgICBcInN1bW1hcnlcIjogXCJBIHN0YXRpYyBtZXRob2QuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDQ2LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwic3RhdGljTWV0aG9kXCIsXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIl9lbm1cIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25hbFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRW51bVR5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBcInN0YXRpY1wiOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQW4gaW5zdGFuY2UgbWV0aG9kIGNhbGwuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDYxLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWV0aG9kQ2FsbFwiLFxuICAgICAgICAgICAgICAgIFwib3ZlcnJpZGVzXCI6IFwidGVzdHBrZy5JSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQ2xhc3NOYW1lXCIsXG4gICAgICAgICAgICBcInByb3BlcnRpZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQSBwcm9wZXJ0eSB2YWx1ZS5cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogNTAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwib3ZlcnJpZGVzXCI6IFwidGVzdHBrZy5JSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRW51bVR5cGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpDbGFzc05hbWVcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidGVzdHBrZy5DbGFzc05hbWVQcm9wc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZGF0YXR5cGVcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5DbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiaW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiAzNSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImFic3RyYWN0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJpbW11dGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDM3LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZm9vXCIsXG4gICAgICAgICAgICAgICAgXCJvcHRpb25hbFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImltbXV0YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogMzYsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwib3B0aW9uYWxcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5FbnVtVHlwZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJzeW1ib2xJZFwiOiBcImluZGV4OkNsYXNzTmFtZVByb3BzXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInRlc3Rwa2cuRW51bVR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBuZXcgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIG5ldyBDbGFzc05hbWVQcm9wcyB7IFByb3BlcnR5ID0gRW51bVR5cGUuT1BUSU9OX0IgfSk7XCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkVudW1UeXBlXCIsXG4gICAgICAgICAgICBcImtpbmRcIjogXCJlbnVtXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiA1LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWVtYmVyc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBDbGFzc05hbWUoXFxcXFwidGhpc1xcXFxcIiwgMTMzNywgbmV3IENsYXNzTmFtZVByb3BzIHsgUHJvcGVydHkgPSBFbnVtVHlwZS5PUFRJT05fQSB9KTtcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIk9QVElPTl9BXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBDbGFzc05hbWUoXFxcXFwidGhpc1xcXFxcIiwgMTMzNywgbmV3IENsYXNzTmFtZVByb3BzIHsgUHJvcGVydHkgPSBFbnVtVHlwZS5PUFRJT05fQiB9KTtcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIk9QVElPTl9CXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRW51bVR5cGVcIixcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpFbnVtVHlwZVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ0ZXN0cGtnLklJbnRlcmZhY2VcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuSUludGVyZmFjZVwiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiaW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiAxNyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1ldGhvZHNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIi8vIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgaWZhY2UuTWV0aG9kQ2FsbCgpO1wiLFxuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQW4gaW5zdGFuY2UgbWV0aG9kIGNhbGwuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDMyLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWV0aG9kQ2FsbFwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIklJbnRlcmZhY2VcIixcbiAgICAgICAgICAgIFwicHJvcGVydGllc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJhYnN0cmFjdFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBpZmFjZS5Qcm9wZXJ0eSA9IEVudW1UeXBlLk9QVElPTl9CO1wiLFxuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQSBwcm9wZXJ0eSB2YWx1ZS5cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogMjQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkVudW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcInN5bWJvbElkXCI6IFwiaW5kZXg6SUludGVyZmFjZVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwidmVyc2lvblwiOiBcIjAuMC4xXCIsXG4gICAgICB9XG4gICAgYCxcbiAgICApO1xuICAgIGV4cGVjdChmcy5yZWFkSnNvblN5bmMocGF0aC5qb2luKHRtcERpciwgYCR7U1BFQ19GSUxFX05BTUV9LmphdmFgKSkpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChcbiAgICAgIHtcbiAgICAgICAgZmluZ2VycHJpbnQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAganNpaVZlcnNpb246IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgIH0sXG4gICAgICBgXG4gICAgICBPYmplY3Qge1xuICAgICAgICBcImF1dGhvclwiOiBPYmplY3Qge1xuICAgICAgICAgIFwibmFtZVwiOiBcIkpvaG4gRG9lXCIsXG4gICAgICAgICAgXCJyb2xlc1wiOiBBcnJheSBbXG4gICAgICAgICAgICBcImF1dGhvclwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZmluZ2VycHJpbnRcIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwiaG9tZXBhZ2VcIjogXCJodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkuZ2l0XCIsXG4gICAgICAgIFwianNpaVZlcnNpb25cIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwibGljZW5zZVwiOiBcIkFwYWNoZS0yLjBcIixcbiAgICAgICAgXCJtZXRhZGF0YVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwianNpaVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJwYWNtYWtcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJoYXNEZWZhdWx0SW50ZXJmYWNlc1wiOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwicmVhZG1lXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJtYXJrZG93blwiOiBcIiMgUkVBRE1FXG5cbiAgICAgIFxcYFxcYFxcYGphdmFcbiAgICAgIC8vIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgSUludGVyZmFjZSBvYmplY3QgPSBuZXcgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIG5ldyBDbGFzc05hbWVQcm9wcygpLmZvbyhcXFxcXCJiYXJcXFxcXCIpKTtcbiAgICAgIG9iamVjdC5nZXRQcm9wZXJ0eSgpID0gRW51bVR5cGUuT1BUSU9OX0E7XG4gICAgICBvYmplY3QubWV0aG9kQ2FsbCgpO1xuXG4gICAgICBDbGFzc05hbWUuc3RhdGljTWV0aG9kKEVudW1UeXBlLk9QVElPTl9CKTtcbiAgICAgIFxcYFxcYFxcYFwiLFxuICAgICAgICB9LFxuICAgICAgICBcInJlcG9zaXRvcnlcIjogT2JqZWN0IHtcbiAgICAgICAgICBcInR5cGVcIjogXCJnaXRcIixcbiAgICAgICAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS5naXRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJzY2hlbWFcIjogXCJqc2lpLzAuMTAuMFwiLFxuICAgICAgICBcInRhcmdldHNcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImpzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcIm5wbVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcInR5cGVzXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJ0ZXN0cGtnLkNsYXNzTmFtZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5DbGFzc05hbWVcIixcbiAgICAgICAgICAgIFwiaW5pdGlhbGl6ZXJcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBuZXcgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIG5ldyBDbGFzc05hbWVQcm9wcygpLnByb3BlcnR5KEVudW1UeXBlLk9QVElPTl9CKSk7XCIsXG4gICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIENsYXNzTmFtZS5cIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgXCJsaW5lXCI6IDU3LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBcInBhcmFtZXRlcnNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJfdGhpc1wiLFxuICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJpbWl0aXZlXCI6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIl9lbGl0ZVwiLFxuICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJpbWl0aXZlXCI6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInByb3BzXCIsXG4gICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkNsYXNzTmFtZVByb3BzXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJpbnRlcmZhY2VzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgXCJ0ZXN0cGtnLklJbnRlcmZhY2VcIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcImtpbmRcIjogXCJjbGFzc1wiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogNDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtZXRob2RzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIi8vIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgQ2xhc3NOYW1lLnN0YXRpY01ldGhvZCgpO1wiLFxuICAgICAgICAgICAgICAgICAgXCJyZW1hcmtzXCI6IFwiSXQgY2FuIGJlIGludm9rZWQgZWFzaWx5LlwiLFxuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQSBzdGF0aWMgbWV0aG9kLlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiOiA0NixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInN0YXRpY01ldGhvZFwiLFxuICAgICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJfZW5tXCIsXG4gICAgICAgICAgICAgICAgICAgIFwib3B0aW9uYWxcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkVudW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXCJzdGF0aWNcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkFuIGluc3RhbmNlIG1ldGhvZCBjYWxsLlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiOiA2MSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1ldGhvZENhbGxcIixcbiAgICAgICAgICAgICAgICBcIm92ZXJyaWRlc1wiOiBcInRlc3Rwa2cuSUludGVyZmFjZVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkNsYXNzTmFtZVwiLFxuICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkEgcHJvcGVydHkgdmFsdWUuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDUwLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICBcIm92ZXJyaWRlc1wiOiBcInRlc3Rwa2cuSUludGVyZmFjZVwiLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkVudW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcInN5bWJvbElkXCI6IFwiaW5kZXg6Q2xhc3NOYW1lXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInRlc3Rwa2cuQ2xhc3NOYW1lUHJvcHNcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImRhdGF0eXBlXCI6IHRydWUsXG4gICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuQ2xhc3NOYW1lUHJvcHNcIixcbiAgICAgICAgICAgIFwia2luZFwiOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogMzUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQ2xhc3NOYW1lUHJvcHNcIixcbiAgICAgICAgICAgIFwicHJvcGVydGllc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJhYnN0cmFjdFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwiaW1tdXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiOiAzNyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZvb1wiLFxuICAgICAgICAgICAgICAgIFwib3B0aW9uYWxcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwicHJpbWl0aXZlXCI6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImFic3RyYWN0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJpbW11dGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDM2LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICBcIm9wdGlvbmFsXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRW51bVR5cGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpDbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ0ZXN0cGtnLkVudW1UeXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIi8vIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgbmV3IENsYXNzTmFtZShcXFxcXCJ0aGlzXFxcXFwiLCAxMzM3LCBuZXcgQ2xhc3NOYW1lUHJvcHMoKS5wcm9wZXJ0eShFbnVtVHlwZS5PUFRJT05fQikpO1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5FbnVtVHlwZVwiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiZW51bVwiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogNSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1lbWJlcnNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBuZXcgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIG5ldyBDbGFzc05hbWVQcm9wcygpLnByb3BlcnR5KEVudW1UeXBlLk9QVElPTl9BKSk7XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJPUFRJT05fQVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBuZXcgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIG5ldyBDbGFzc05hbWVQcm9wcygpLnByb3BlcnR5KEVudW1UeXBlLk9QVElPTl9CKSk7XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJPUFRJT05fQlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkVudW1UeXBlXCIsXG4gICAgICAgICAgICBcInN5bWJvbElkXCI6IFwiaW5kZXg6RW51bVR5cGVcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidGVzdHBrZy5JSW50ZXJmYWNlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLklJbnRlcmZhY2VcIixcbiAgICAgICAgICAgIFwia2luZFwiOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogMTcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtZXRob2RzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImFic3RyYWN0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIGlmYWNlLm1ldGhvZENhbGwoKTtcIixcbiAgICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkFuIGluc3RhbmNlIG1ldGhvZCBjYWxsLlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiOiAzMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1ldGhvZENhbGxcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJJSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcInByb3BlcnRpZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIi8vIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgaWZhY2UuZ2V0UHJvcGVydHkoKSA9IEVudW1UeXBlLk9QVElPTl9CO1wiLFxuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQSBwcm9wZXJ0eSB2YWx1ZS5cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogMjQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkVudW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcInN5bWJvbElkXCI6IFwiaW5kZXg6SUludGVyZmFjZVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwidmVyc2lvblwiOiBcIjAuMC4xXCIsXG4gICAgICB9XG4gICAgYCxcbiAgICApO1xuICAgIGV4cGVjdChmcy5yZWFkSnNvblN5bmMocGF0aC5qb2luKHRtcERpciwgYCR7U1BFQ19GSUxFX05BTUV9LnB5dGhvbmApKSkudG9NYXRjaElubGluZVNuYXBzaG90KFxuICAgICAge1xuICAgICAgICBmaW5nZXJwcmludDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICBqc2lpVmVyc2lvbjogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgfSxcbiAgICAgIGBcbiAgICAgIE9iamVjdCB7XG4gICAgICAgIFwiYXV0aG9yXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJuYW1lXCI6IFwiSm9obiBEb2VcIixcbiAgICAgICAgICBcInJvbGVzXCI6IEFycmF5IFtcbiAgICAgICAgICAgIFwiYXV0aG9yXCIsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJmaW5nZXJwcmludFwiOiBBbnk8U3RyaW5nPixcbiAgICAgICAgXCJob21lcGFnZVwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS5naXRcIixcbiAgICAgICAgXCJqc2lpVmVyc2lvblwiOiBBbnk8U3RyaW5nPixcbiAgICAgICAgXCJsaWNlbnNlXCI6IFwiQXBhY2hlLTIuMFwiLFxuICAgICAgICBcIm1ldGFkYXRhXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJqc2lpXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcInBhY21ha1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImhhc0RlZmF1bHRJbnRlcmZhY2VzXCI6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwibmFtZVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJyZWFkbWVcIjogT2JqZWN0IHtcbiAgICAgICAgICBcIm1hcmtkb3duXCI6IFwiIyBSRUFETUVcblxuICAgICAgXFxgXFxgXFxgcHl0aG9uXG4gICAgICAjIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgICMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBvYmplY3QgPSBDbGFzc05hbWUoXFxcXFwidGhpc1xcXFxcIiwgMTMzNywgZm9vPVxcXFxcImJhclxcXFxcIilcbiAgICAgIG9iamVjdC5wcm9wZXJ0eSA9IEVudW1UeXBlLk9QVElPTl9BXG4gICAgICBvYmplY3QubWV0aG9kX2NhbGwoKVxuXG4gICAgICBDbGFzc05hbWUuc3RhdGljX21ldGhvZChFbnVtVHlwZS5PUFRJT05fQilcbiAgICAgIFxcYFxcYFxcYFwiLFxuICAgICAgICB9LFxuICAgICAgICBcInJlcG9zaXRvcnlcIjogT2JqZWN0IHtcbiAgICAgICAgICBcInR5cGVcIjogXCJnaXRcIixcbiAgICAgICAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS5naXRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJzY2hlbWFcIjogXCJqc2lpLzAuMTAuMFwiLFxuICAgICAgICBcInRhcmdldHNcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImpzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICBcIm5wbVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcInR5cGVzXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJ0ZXN0cGtnLkNsYXNzTmFtZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5DbGFzc05hbWVcIixcbiAgICAgICAgICAgIFwiaW5pdGlhbGl6ZXJcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiIyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIHByb3BlcnR5PUVudW1UeXBlLk9QVElPTl9CKVwiLFxuICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBDbGFzc05hbWUuXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgIFwibGluZVwiOiA1NyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiX3RoaXNcIixcbiAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICBcInByaW1pdGl2ZVwiOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJfZWxpdGVcIixcbiAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICBcInByaW1pdGl2ZVwiOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wc1wiLFxuICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5DbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiaW50ZXJmYWNlc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgIFwidGVzdHBrZy5JSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiY2xhc3NcIixcbiAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgXCJsaW5lXCI6IDQwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWV0aG9kc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIjIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZC5cbiAgICAgICMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBDbGFzc05hbWUuc3RhdGljX21ldGhvZCgpXCIsXG4gICAgICAgICAgICAgICAgICBcInJlbWFya3NcIjogXCJJdCBjYW4gYmUgaW52b2tlZCBlYXNpbHkuXCIsXG4gICAgICAgICAgICAgICAgICBcInN1bW1hcnlcIjogXCJBIHN0YXRpYyBtZXRob2QuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDQ2LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwic3RhdGljTWV0aG9kXCIsXG4gICAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIl9lbm1cIixcbiAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25hbFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRW51bVR5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBcInN0YXRpY1wiOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQW4gaW5zdGFuY2UgbWV0aG9kIGNhbGwuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDYxLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWV0aG9kQ2FsbFwiLFxuICAgICAgICAgICAgICAgIFwib3ZlcnJpZGVzXCI6IFwidGVzdHBrZy5JSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQ2xhc3NOYW1lXCIsXG4gICAgICAgICAgICBcInByb3BlcnRpZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJzdW1tYXJ5XCI6IFwiQSBwcm9wZXJ0eSB2YWx1ZS5cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogNTAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwib3ZlcnJpZGVzXCI6IFwidGVzdHBrZy5JSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRW51bVR5cGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpDbGFzc05hbWVcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidGVzdHBrZy5DbGFzc05hbWVQcm9wc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZGF0YXR5cGVcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5DbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiaW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiAzNSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDbGFzc05hbWVQcm9wc1wiLFxuICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImFic3RyYWN0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJpbW11dGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDM3LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZm9vXCIsXG4gICAgICAgICAgICAgICAgXCJvcHRpb25hbFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImltbXV0YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgICBcImxpbmVcIjogMzYsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIFwib3B0aW9uYWxcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5FbnVtVHlwZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJzeW1ib2xJZFwiOiBcImluZGV4OkNsYXNzTmFtZVByb3BzXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInRlc3Rwa2cuRW51bVR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiIyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIHByb3BlcnR5PUVudW1UeXBlLk9QVElPTl9CKVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5FbnVtVHlwZVwiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiZW51bVwiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogNSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1lbWJlcnNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiIyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQuXG4gICAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgQ2xhc3NOYW1lKFxcXFxcInRoaXNcXFxcXCIsIDEzMzcsIHByb3BlcnR5PUVudW1UeXBlLk9QVElPTl9BKVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiT1BUSU9OX0FcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIiMgVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIENsYXNzTmFtZShcXFxcXCJ0aGlzXFxcXFwiLCAxMzM3LCBwcm9wZXJ0eT1FbnVtVHlwZS5PUFRJT05fQilcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIk9QVElPTl9CXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRW51bVR5cGVcIixcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpFbnVtVHlwZVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ0ZXN0cGtnLklJbnRlcmZhY2VcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuSUludGVyZmFjZVwiLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiaW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiAxNyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1ldGhvZHNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIiMgVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIGlmYWNlLm1ldGhvZF9jYWxsKClcIixcbiAgICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkFuIGluc3RhbmNlIG1ldGhvZCBjYWxsLlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiOiAzMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1ldGhvZENhbGxcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJJSW50ZXJmYWNlXCIsXG4gICAgICAgICAgICBcInByb3BlcnRpZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiYWJzdHJhY3RcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIiMgVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkLlxuICAgICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIGlmYWNlLnByb3BlcnR5ID0gRW51bVR5cGUuT1BUSU9OX0JcIixcbiAgICAgICAgICAgICAgICAgIFwic3VtbWFyeVwiOiBcIkEgcHJvcGVydHkgdmFsdWUuXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lXCI6IDI0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5FbnVtVHlwZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgXCJzeW1ib2xJZFwiOiBcImluZGV4OklJbnRlcmZhY2VcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcInZlcnNpb25cIjogXCIwLjAuMVwiLFxuICAgICAgfVxuICAgIGAsXG4gICAgKTtcbiAgfSkpO1xuXG50ZXN0KCdzaW5nbGUgYXNzZW1ibHksIGxvb3NlIG1vZGUnLCAoKSA9PlxuICB3aXRoVGVtcG9yYXJ5RGlyZWN0b3J5KGFzeW5jICh0bXBEaXIpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IGNvbXBpbGF0aW9uUmVzdWx0ID0gYXdhaXQganNpaS5jb21waWxlSnNpaUZvclRlc3Qoe1xuICAgICAgJ1JFQURNRS5tZCc6IGBcbiMgTWlzc2luZyBsaXRlcmF0ZSBzb3VyY2VcblxuW3RzIHNvdXJjZSBpcyBub3QgZm91bmRdKG1pc3NpbmctZXhhbXBsZS5saXQudHMpXG5cbiMgTWlzc2luZyBsaXRlcmF0ZSBzb3VyY2UgYW5kIGZhbGxiYWNrXG5cbltleGFtcGxlIGlzIG5vdCBmb3VuZF0ob21pdC1leGFtcGxlLmxpdC50cylcblxuIyBNaXNzaW5nIGZpeHR1cmVcblxuXFxgXFxgXFxgdHMgZml4dHVyZT1ub3QtZm91bmRcbm5ldyBTYW1wbGVDbGFzcygnUkVBRE1FLm1kJyk7XG5cXGBcXGBcXGBcbmAsXG4gICAgICAnaW5kZXgudHMnOiBgXG4vKipcbiAqIEBleGFtcGxlXG4gKiAgIC8vLyBmaXh0dXJlPW5vdC1mb3VuZFxuICogICBuZXcgRG9lc05vdENvbXBpbGUodGhpcywgJ1RoYXQnLCB7IGZvbzogMTMzNyB9KTtcbiAqL1xuZXhwb3J0IGNsYXNzIFNhbXBsZUNsYXNzIHtcbiAgcHVibGljIGNvbnN0cnVjdG9yKF9zb3VyY2U6IHN0cmluZyl7IH1cbn1cbmAsXG4gICAgICAvLyBUaGUgYGxpdC50c2Agc291cmNlIGZpbGUgd2lsbCBub3QgYmUgdGhlcmUgaW4gcGFja2FnZWQgZm9ybS4uLlxuICAgICAgJ21pc3NpbmctZXhhbXBsZS5saXQudHMnOiBgXG5pbXBvcnQgeyBTYW1wbGVDbGFzcyB9IGZyb20gJy4vaW5kZXgnO1xuXG4vLy8gIXNob3dcbi8vLyAjIyBUaGlzIGlzIGEgaGVhZGluZyB3aXRoaW4gdGhlIGxpdGVyYXRlIGZpbGUhXG5uZXcgU2FtcGxlQ2xhc3MoJ2xpdGVyYXRlJyk7XG4gICAgICBgLFxuICAgICAgLy8gVGhlIGBsaXQudHNgICBzb3VyY2UgZmlsZSBhbmQgYGxpdC5qc2Agb3V0cHV0IHdpbGwgbm90IGJlIHRoZXJlIGluIHBhY2thZ2VkIGZvcm0uLi5cbiAgICAgICdvbWl0LWV4YW1wbGUubGl0LnRzJzogYFxuaW1wb3J0IHsgU2FtcGxlQ2xhc3MgfSBmcm9tICcuL2luZGV4JztcblxuLy8vICFzaG93XG4vLy8gIyMgVGhpcyBpcyBhIGhlYWRpbmcgd2l0aGluIHRoZSBvbWl0dGVkIGxpdGVyYXRlIGZpbGUhXG5uZXcgU2FtcGxlQ2xhc3MoJ29taXR0ZWQtbGl0ZXJhdGUnKTtcbiAgICAgIGAsXG4gICAgfSk7XG4gICAgZnMud3JpdGVKc29uU3luYyhwYXRoLmpvaW4odG1wRGlyLCBTUEVDX0ZJTEVfTkFNRSksIGNvbXBpbGF0aW9uUmVzdWx0LmFzc2VtYmx5LCB7XG4gICAgICBzcGFjZXM6IDIsXG4gICAgfSk7XG4gICAgZm9yIChjb25zdCBbZmlsZSwgY29udGVudF0gb2YgT2JqZWN0LmVudHJpZXMoY29tcGlsYXRpb25SZXN1bHQuZmlsZXMpKSB7XG4gICAgICBpZiAoZmlsZS5zdGFydHNXaXRoKCdvbWl0LScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLnJlc29sdmUodG1wRGlyLCBmaWxlKSwgY29udGVudCwgJ3V0Zi04Jyk7XG4gICAgfVxuXG4gICAgLy8gV0hFTlxuICAgIGF3YWl0IGV4cGVjdChcbiAgICAgIHRyYW5zbGl0ZXJhdGVBc3NlbWJseShbdG1wRGlyXSwgT2JqZWN0LnZhbHVlcyhUYXJnZXRMYW5ndWFnZSksIHtcbiAgICAgICAgbG9vc2U6IHRydWUsXG4gICAgICB9KSxcbiAgICApLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG5cbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KGZzLnJlYWRKc29uU3luYyhwYXRoLmpvaW4odG1wRGlyLCBgJHtTUEVDX0ZJTEVfTkFNRX0uY3NoYXJwYCkpKS50b01hdGNoSW5saW5lU25hcHNob3QoXG4gICAgICB7XG4gICAgICAgIGZpbmdlcnByaW50OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIGpzaWlWZXJzaW9uOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICB9LFxuICAgICAgYFxuICAgICAgT2JqZWN0IHtcbiAgICAgICAgXCJhdXRob3JcIjogT2JqZWN0IHtcbiAgICAgICAgICBcIm5hbWVcIjogXCJKb2huIERvZVwiLFxuICAgICAgICAgIFwicm9sZXNcIjogQXJyYXkgW1xuICAgICAgICAgICAgXCJhdXRob3JcIixcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImZpbmdlcnByaW50XCI6IEFueTxTdHJpbmc+LFxuICAgICAgICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpLmdpdFwiLFxuICAgICAgICBcImpzaWlWZXJzaW9uXCI6IEFueTxTdHJpbmc+LFxuICAgICAgICBcImxpY2Vuc2VcIjogXCJBcGFjaGUtMi4wXCIsXG4gICAgICAgIFwibWV0YWRhdGFcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImpzaWlcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwicGFjbWFrXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiaGFzRGVmYXVsdEludGVyZmFjZXNcIjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJuYW1lXCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcInJlYWRtZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwibWFya2Rvd25cIjogXCIjIE1pc3NpbmcgbGl0ZXJhdGUgc291cmNlXG5cbiAgICAgICMjIFRoaXMgaXMgYSBoZWFkaW5nIHdpdGhpbiB0aGUgbGl0ZXJhdGUgZmlsZSFcblxuICAgICAgXFxgXFxgXFxgY3NoYXJwXG4gICAgICAvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgbmV3IFNhbXBsZUNsYXNzKFxcXFxcImxpdGVyYXRlXFxcXFwiKTtcbiAgICAgIFxcYFxcYFxcYFxuXG4gICAgICAjIE1pc3NpbmcgbGl0ZXJhdGUgc291cmNlIGFuZCBmYWxsYmFja1xuXG4gICAgICAjIyBUaGlzIGlzIGEgaGVhZGluZyB3aXRoaW4gdGhlIG9taXR0ZWQgbGl0ZXJhdGUgZmlsZSFcblxuICAgICAgXFxgXFxgXFxgY3NoYXJwXG4gICAgICAvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgbmV3IFNhbXBsZUNsYXNzKFxcXFxcIm9taXR0ZWQtbGl0ZXJhdGVcXFxcXCIpO1xuICAgICAgXFxgXFxgXFxgXG5cbiAgICAgICMgTWlzc2luZyBmaXh0dXJlXG5cbiAgICAgIFxcYFxcYFxcYGNzaGFycFxuICAgICAgLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkIHdpdGggaW5jb21wbGV0ZSB0eXBlIGluZm9ybWF0aW9uLiBJdCBtYXkgbm90IHdvcmsgYXMtaXMuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBTYW1wbGVDbGFzcyhcXFxcXCJSRUFETUUubWRcXFxcXCIpO1xuICAgICAgXFxgXFxgXFxgXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwicmVwb3NpdG9yeVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgICAgICAgIFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpLmdpdFwiLFxuICAgICAgICB9LFxuICAgICAgICBcInNjaGVtYVwiOiBcImpzaWkvMC4xMC4wXCIsXG4gICAgICAgIFwidGFyZ2V0c1wiOiBPYmplY3Qge1xuICAgICAgICAgIFwianNcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwibnBtXCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwidHlwZXNcIjogT2JqZWN0IHtcbiAgICAgICAgICBcInRlc3Rwa2cuU2FtcGxlQ2xhc3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IFwiLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkIHdpdGggaW5jb21wbGV0ZSB0eXBlIGluZm9ybWF0aW9uLiBJdCBtYXkgbm90IHdvcmsgYXMtaXMuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBEb2VzTm90Q29tcGlsZSh0aGlzLCBcXFxcXCJUaGF0XFxcXFwiLCBuZXcgU3RydWN0IHsgRm9vID0gMTMzNyB9KTtcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuU2FtcGxlQ2xhc3NcIixcbiAgICAgICAgICAgIFwiaW5pdGlhbGl6ZXJcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgICAgXCJsaW5lXCI6IDgsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwicGFyYW1ldGVyc1wiOiBBcnJheSBbXG4gICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIl9zb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICBcInByaW1pdGl2ZVwiOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImluZGV4LnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiA3LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNhbXBsZUNsYXNzXCIsXG4gICAgICAgICAgICBcInN5bWJvbElkXCI6IFwiaW5kZXg6U2FtcGxlQ2xhc3NcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcInZlcnNpb25cIjogXCIwLjAuMVwiLFxuICAgICAgfVxuICAgIGAsXG4gICAgKTtcblxuICAgIGV4cGVjdChmcy5yZWFkSnNvblN5bmMocGF0aC5qb2luKHRtcERpciwgYCR7U1BFQ19GSUxFX05BTUV9LmphdmFgKSkpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChcbiAgICAgIHtcbiAgICAgICAgZmluZ2VycHJpbnQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAganNpaVZlcnNpb246IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgIH0sXG4gICAgICBgXG4gICAgICBPYmplY3Qge1xuICAgICAgICBcImF1dGhvclwiOiBPYmplY3Qge1xuICAgICAgICAgIFwibmFtZVwiOiBcIkpvaG4gRG9lXCIsXG4gICAgICAgICAgXCJyb2xlc1wiOiBBcnJheSBbXG4gICAgICAgICAgICBcImF1dGhvclwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZmluZ2VycHJpbnRcIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwiaG9tZXBhZ2VcIjogXCJodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkuZ2l0XCIsXG4gICAgICAgIFwianNpaVZlcnNpb25cIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwibGljZW5zZVwiOiBcIkFwYWNoZS0yLjBcIixcbiAgICAgICAgXCJtZXRhZGF0YVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwianNpaVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJwYWNtYWtcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJoYXNEZWZhdWx0SW50ZXJmYWNlc1wiOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwicmVhZG1lXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJtYXJrZG93blwiOiBcIiMgTWlzc2luZyBsaXRlcmF0ZSBzb3VyY2VcblxuICAgICAgIyMgVGhpcyBpcyBhIGhlYWRpbmcgd2l0aGluIHRoZSBsaXRlcmF0ZSBmaWxlIVxuXG4gICAgICBcXGBcXGBcXGBqYXZhXG4gICAgICAvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgbmV3IFNhbXBsZUNsYXNzKFxcXFxcImxpdGVyYXRlXFxcXFwiKTtcbiAgICAgIFxcYFxcYFxcYFxuXG4gICAgICAjIE1pc3NpbmcgbGl0ZXJhdGUgc291cmNlIGFuZCBmYWxsYmFja1xuXG4gICAgICAjIyBUaGlzIGlzIGEgaGVhZGluZyB3aXRoaW4gdGhlIG9taXR0ZWQgbGl0ZXJhdGUgZmlsZSFcblxuICAgICAgXFxgXFxgXFxgamF2YVxuICAgICAgLy8gVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkIHdpdGggaW5jb21wbGV0ZSB0eXBlIGluZm9ybWF0aW9uLiBJdCBtYXkgbm90IHdvcmsgYXMtaXMuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIG5ldyBTYW1wbGVDbGFzcyhcXFxcXCJvbWl0dGVkLWxpdGVyYXRlXFxcXFwiKTtcbiAgICAgIFxcYFxcYFxcYFxuXG4gICAgICAjIE1pc3NpbmcgZml4dHVyZVxuXG4gICAgICBcXGBcXGBcXGBqYXZhXG4gICAgICAvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgbmV3IFNhbXBsZUNsYXNzKFxcXFxcIlJFQURNRS5tZFxcXFxcIik7XG4gICAgICBcXGBcXGBcXGBcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJyZXBvc2l0b3J5XCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgICAgICAgXCJ1cmxcIjogXCJodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkuZ2l0XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwic2NoZW1hXCI6IFwianNpaS8wLjEwLjBcIixcbiAgICAgICAgXCJ0YXJnZXRzXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJqc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJucG1cIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0eXBlc1wiOiBPYmplY3Qge1xuICAgICAgICAgIFwidGVzdHBrZy5TYW1wbGVDbGFzc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIvLyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgRG9lc05vdENvbXBpbGUuQnVpbGRlci5jcmVhdGUodGhpcywgXFxcXFwiVGhhdFxcXFxcIikuZm9vKDEzMzcpLmJ1aWxkKCk7XCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLlNhbXBsZUNsYXNzXCIsXG4gICAgICAgICAgICBcImluaXRpYWxpemVyXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICAgIFwibGluZVwiOiA4LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBcInBhcmFtZXRlcnNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJfc291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImtpbmRcIjogXCJjbGFzc1wiLFxuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJpbmRleC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogNyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJTYW1wbGVDbGFzc1wiLFxuICAgICAgICAgICAgXCJzeW1ib2xJZFwiOiBcImluZGV4OlNhbXBsZUNsYXNzXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiMC4wLjFcIixcbiAgICAgIH1cbiAgICBgLFxuICAgICk7XG5cbiAgICBleHBlY3QoZnMucmVhZEpzb25TeW5jKHBhdGguam9pbih0bXBEaXIsIGAke1NQRUNfRklMRV9OQU1FfS5weXRob25gKSkpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChcbiAgICAgIHtcbiAgICAgICAgZmluZ2VycHJpbnQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAganNpaVZlcnNpb246IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgIH0sXG4gICAgICBgXG4gICAgICBPYmplY3Qge1xuICAgICAgICBcImF1dGhvclwiOiBPYmplY3Qge1xuICAgICAgICAgIFwibmFtZVwiOiBcIkpvaG4gRG9lXCIsXG4gICAgICAgICAgXCJyb2xlc1wiOiBBcnJheSBbXG4gICAgICAgICAgICBcImF1dGhvclwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZmluZ2VycHJpbnRcIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwiaG9tZXBhZ2VcIjogXCJodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkuZ2l0XCIsXG4gICAgICAgIFwianNpaVZlcnNpb25cIjogQW55PFN0cmluZz4sXG4gICAgICAgIFwibGljZW5zZVwiOiBcIkFwYWNoZS0yLjBcIixcbiAgICAgICAgXCJtZXRhZGF0YVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwianNpaVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJwYWNtYWtcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJoYXNEZWZhdWx0SW50ZXJmYWNlc1wiOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwicmVhZG1lXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJtYXJrZG93blwiOiBcIiMgTWlzc2luZyBsaXRlcmF0ZSBzb3VyY2VcblxuICAgICAgIyMgVGhpcyBpcyBhIGhlYWRpbmcgd2l0aGluIHRoZSBsaXRlcmF0ZSBmaWxlIVxuXG4gICAgICBcXGBcXGBcXGBweXRob25cbiAgICAgICMgVGhpcyBleGFtcGxlIHdhcyBhdXRvbWF0aWNhbGx5IHRyYW5zbGl0ZXJhdGVkIHdpdGggaW5jb21wbGV0ZSB0eXBlIGluZm9ybWF0aW9uLiBJdCBtYXkgbm90IHdvcmsgYXMtaXMuXG4gICAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkvaXNzdWVzLzgyNiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgU2FtcGxlQ2xhc3MoXFxcXFwibGl0ZXJhdGVcXFxcXCIpXG4gICAgICBcXGBcXGBcXGBcblxuICAgICAgIyBNaXNzaW5nIGxpdGVyYXRlIHNvdXJjZSBhbmQgZmFsbGJhY2tcblxuICAgICAgIyMgVGhpcyBpcyBhIGhlYWRpbmcgd2l0aGluIHRoZSBvbWl0dGVkIGxpdGVyYXRlIGZpbGUhXG5cbiAgICAgIFxcYFxcYFxcYHB5dGhvblxuICAgICAgIyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgICMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBTYW1wbGVDbGFzcyhcXFxcXCJvbWl0dGVkLWxpdGVyYXRlXFxcXFwiKVxuICAgICAgXFxgXFxgXFxgXG5cbiAgICAgICMgTWlzc2luZyBmaXh0dXJlXG5cbiAgICAgIFxcYFxcYFxcYHB5dGhvblxuICAgICAgIyBUaGlzIGV4YW1wbGUgd2FzIGF1dG9tYXRpY2FsbHkgdHJhbnNsaXRlcmF0ZWQgd2l0aCBpbmNvbXBsZXRlIHR5cGUgaW5mb3JtYXRpb24uIEl0IG1heSBub3Qgd29yayBhcy1pcy5cbiAgICAgICMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hd3MvanNpaS9pc3N1ZXMvODI2IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICBTYW1wbGVDbGFzcyhcXFxcXCJSRUFETUUubWRcXFxcXCIpXG4gICAgICBcXGBcXGBcXGBcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJyZXBvc2l0b3J5XCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgICAgICAgXCJ1cmxcIjogXCJodHRwczovL2dpdGh1Yi5jb20vYXdzL2pzaWkuZ2l0XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwic2NoZW1hXCI6IFwianNpaS8wLjEwLjBcIixcbiAgICAgICAgXCJ0YXJnZXRzXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJqc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJucG1cIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0eXBlc1wiOiBPYmplY3Qge1xuICAgICAgICAgIFwidGVzdHBrZy5TYW1wbGVDbGFzc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImV4YW1wbGVcIjogXCIjIFRoaXMgZXhhbXBsZSB3YXMgYXV0b21hdGljYWxseSB0cmFuc2xpdGVyYXRlZCB3aXRoIGluY29tcGxldGUgdHlwZSBpbmZvcm1hdGlvbi4gSXQgbWF5IG5vdCB3b3JrIGFzLWlzLlxuICAgICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F3cy9qc2lpL2lzc3Vlcy84MjYgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgICAgIERvZXNOb3RDb21waWxlKHNlbGYsIFxcXFxcIlRoYXRcXFxcXCIsIGZvbz0xMzM3KVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5TYW1wbGVDbGFzc1wiLFxuICAgICAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgICBcImxpbmVcIjogOCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJwYXJhbWV0ZXJzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiX3NvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJpbWl0aXZlXCI6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiY2xhc3NcIixcbiAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgXCJsaW5lXCI6IDcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU2FtcGxlQ2xhc3NcIixcbiAgICAgICAgICAgIFwic3ltYm9sSWRcIjogXCJpbmRleDpTYW1wbGVDbGFzc1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFwidmVyc2lvblwiOiBcIjAuMC4xXCIsXG4gICAgICB9XG4gICAgYCxcbiAgICApO1xuICB9KSk7XG5cbnRlc3QoJ3NpbmdsZSBhc3NlbWJseSB3aXRoIGV4YW1wbGUgbWV0YWRhdGEnLCAoKSA9PlxuICB3aXRoVGVtcG9yYXJ5RGlyZWN0b3J5KGFzeW5jICh0bXBEaXIpID0+IHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IGNvbXBpbGF0aW9uUmVzdWx0ID0gYXdhaXQganNpaS5jb21waWxlSnNpaUZvclRlc3Qoe1xuICAgICAgJ2luZGV4LnRzJzogYFxuLyoqXG4gKiBAZXhhbXBsZU1ldGFkYXRhIGZpeHR1cmU9Y3VzdG9tXG4gKiBAZXhhbXBsZVxuICogY29uc3Qgb2JqZWN0OiBJSW50ZXJmYWNlID0gbmV3IENsYXNzTmFtZSgndGhpcycsIDEzMzcsIHsgZm9vOiAnYmFyJyB9KTtcbiAqIG9iamVjdC5wcm9wZXJ0eSA9IEVudW1UeXBlLk9QVElPTl9BO1xuICogb2JqZWN0Lm1ldGhvZENhbGwoKTtcbiAqL1xuZXhwb3J0IGVudW0gRW51bVR5cGUge1xuICAvKipcbiAgICogQGV4YW1wbGUgbmV3IENsYXNzTmFtZSgndGhpcycsIDEzMzcsIHsgcHJvcGVydHk6IEVudW1UeXBlLk9QVElPTl9BIH0pO1xuICAgKi9cbiAgT1BUSU9OX0EgPSAxLFxuXG4gIC8qKlxuICAgKiBAZXhhbXBsZSBuZXcgQ2xhc3NOYW1lKCd0aGlzJywgMTMzNywgeyBwcm9wZXJ0eTogRW51bVR5cGUuT1BUSU9OX0IgfSk7XG4gICAqL1xuICBPUFRJT05fQiA9IDIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBBIHByb3BlcnR5IHZhbHVlLlxuICAgKlxuICAgKiBAZXhhbXBsZU1ldGFkYXRhIG5vZml4dHVyZVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBFbnVtVHlwZSwgSUludGVyZmFjZSwgQ2xhc3NOYW1lIH0gZnJvbSAnLic7XG4gICAqIGRlY2xhcmUgY29uc3QgaWZhY2U6IElJbnRlcmZhY2U7XG4gICAqIGlmYWNlLnByb3BlcnR5ID0gRW51bVR5cGUuT1BUSU9OX0E7XG4gICAqL1xuICBwcm9wZXJ0eTogRW51bVR5cGU7XG5cbiAgLyoqXG4gICAqIEFuIGluc3RhbmNlIG1ldGhvZCBjYWxsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgICBpZmFjZS5tZXRob2RDYWxsKCk7XG4gICAqL1xuICBtZXRob2RDYWxsKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xhc3NOYW1lUHJvcHMge1xuICByZWFkb25seSBwcm9wZXJ0eT86IEVudW1UeXBlO1xuICByZWFkb25seSBmb28/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDbGFzc05hbWUgaW1wbGVtZW50cyBJSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIEEgc3RhdGljIG1ldGhvZC4gSXQgY2FuIGJlIGludm9rZWQgZWFzaWx5LlxuICAgKlxuICAgKiBAZXhhbXBsZSBDbGFzc05hbWUuc3RhdGljTWV0aG9kKCk7XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHN0YXRpY01ldGhvZChfZW5tPzogRW51bVR5cGUpOiB2b2lkIHtcbiAgICAvLyAuLi5cbiAgfVxuXG4gIHB1YmxpYyBwcm9wZXJ0eTogRW51bVR5cGU7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBDbGFzc05hbWUuXG4gICAqXG4gICAqIEBleGFtcGxlIG5ldyBDbGFzc05hbWUoJ3RoaXMnLCAxMzM3LCB7IHByb3BlcnR5OiBFbnVtVHlwZS5PUFRJT05fQiB9KTtcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihfdGhpczogc3RyaW5nLCBfZWxpdGU6IG51bWJlciwgcHJvcHM6IENsYXNzTmFtZVByb3BzKSB7XG4gICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BzLnByb3BlcnR5ID8/IEVudW1UeXBlLk9QVElPTl9BO1xuICB9XG5cbiAgcHVibGljIG1ldGhvZENhbGwoKTogdm9pZCB7XG4gICAgLy8gLi4uXG4gIH1cbn1gLFxuICAgIH0pO1xuICAgIGZzLndyaXRlSnNvblN5bmMocGF0aC5qb2luKHRtcERpciwgU1BFQ19GSUxFX05BTUUpLCBjb21waWxhdGlvblJlc3VsdC5hc3NlbWJseSwge1xuICAgICAgc3BhY2VzOiAyLFxuICAgIH0pO1xuICAgIGZvciAoY29uc3QgW2ZpbGUsIGNvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKGNvbXBpbGF0aW9uUmVzdWx0LmZpbGVzKSkge1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLnJlc29sdmUodG1wRGlyLCBmaWxlKSwgY29udGVudCwgJ3V0Zi04Jyk7XG4gICAgfVxuICAgIGZzLm1rZGlyU3luYyhwYXRoLnJlc29sdmUodG1wRGlyLCAncm9zZXR0YScpKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKHRtcERpciwgJ3Jvc2V0dGEnLCAnZGVmYXVsdC50cy1maXh0dXJlJyksXG4gICAgICBgaW1wb3J0IHsgRW51bVR5cGUsIElJbnRlcmZhY2UsIENsYXNzTmFtZSB9IGZyb20gJy4nO1xcbmRlY2xhcmUgY29uc3QgaWZhY2U6IElJbnRlcmZhY2U7XFxuLy8vIGhlcmVgLFxuICAgICAgJ3V0Zi04JyxcbiAgICApO1xuICAgIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgICBwYXRoLnJlc29sdmUodG1wRGlyLCAncm9zZXR0YScsICdjdXN0b20udHMtZml4dHVyZScpLFxuICAgICAgYGltcG9ydCB7IEVudW1UeXBlLCBJSW50ZXJmYWNlLCBDbGFzc05hbWUgfSBmcm9tICcuJzsvLy8gaGVyZWAsXG4gICAgICAndXRmLTgnLFxuICAgICk7XG5cbiAgICAvLyBUSEVOXG4gICAgYXdhaXQgZXhwZWN0KFxuICAgICAgdHJhbnNsaXRlcmF0ZUFzc2VtYmx5KFt0bXBEaXJdLCBPYmplY3QudmFsdWVzKFRhcmdldExhbmd1YWdlKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICB9KSxcbiAgICApLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gIH0pKTtcbiJdfQ==
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const os = require("os");
const path = require("path");
const filebuff_1 = require("../lib/filebuff");
test('file buffer', async () => {
    const fb = new filebuff_1.default('hello.source');
    fb.write('hello');
    fb.write('\n');
    fb.write('world');
    // save the file
    const tempdir = await fs.mkdtemp(path.join(os.tmpdir(), 'test-file-buffer'));
    await fb.save(tempdir);
    // verify the contents was as expected
    const data = (await fs.readFile(path.join(tempdir, fb.filePath))).toString();
    expect(data).toBe('hello\nworld');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZWJ1ZmYudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZpbGVidWZmLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBK0I7QUFDL0IseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUU3Qiw4Q0FBeUM7QUFFekMsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLElBQUksRUFBRTtJQUM3QixNQUFNLEVBQUUsR0FBRyxJQUFJLGtCQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDMUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNsQixFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2YsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVsQixnQkFBZ0I7SUFDaEIsTUFBTSxPQUFPLEdBQUcsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLGtCQUFrQixDQUFDLENBQUMsQ0FBQztJQUM3RSxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFdkIsc0NBQXNDO0lBQ3RDLE1BQU0sSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDN0UsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCBGaWxlQnVmZmVyIGZyb20gJy4uL2xpYi9maWxlYnVmZic7XG5cbnRlc3QoJ2ZpbGUgYnVmZmVyJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBmYiA9IG5ldyBGaWxlQnVmZmVyKCdoZWxsby5zb3VyY2UnKTtcbiAgZmIud3JpdGUoJ2hlbGxvJyk7XG4gIGZiLndyaXRlKCdcXG4nKTtcbiAgZmIud3JpdGUoJ3dvcmxkJyk7XG5cbiAgLy8gc2F2ZSB0aGUgZmlsZVxuICBjb25zdCB0ZW1wZGlyID0gYXdhaXQgZnMubWtkdGVtcChwYXRoLmpvaW4ob3MudG1wZGlyKCksICd0ZXN0LWZpbGUtYnVmZmVyJykpO1xuICBhd2FpdCBmYi5zYXZlKHRlbXBkaXIpO1xuXG4gIC8vIHZlcmlmeSB0aGUgY29udGVudHMgd2FzIGFzIGV4cGVjdGVkXG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgZnMucmVhZEZpbGUocGF0aC5qb2luKHRlbXBkaXIsIGZiLmZpbGVQYXRoKSkpLnRvU3RyaW5nKCk7XG4gIGV4cGVjdChkYXRhKS50b0JlKCdoZWxsb1xcbndvcmxkJyk7XG59KTtcbiJdfQ==
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const path = require("path");
const filebuff_1 = require("../lib/filebuff");
test('file buffer', async () => {
    const fb = new filebuff_1.default('hello.source');
    fb.write('hello');
    fb.write('\n');
    fb.write('world');
    // save the file
    const tempdir = await fs.mkdtemp('/tmp/test-file-buffer');
    await fb.save(tempdir);
    // verify the contents was as expected
    const data = (await fs.readFile(path.join(tempdir, fb.filePath))).toString();
    expect(data).toBe('hello\nworld');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZWJ1ZmYudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZpbGVidWZmLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBK0I7QUFDL0IsNkJBQTZCO0FBQzdCLDhDQUF5QztBQUV6QyxJQUFJLENBQUMsYUFBYSxFQUFFLEtBQUssSUFBSSxFQUFFO0lBQzdCLE1BQU0sRUFBRSxHQUFHLElBQUksa0JBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUMxQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2xCLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDZixFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRWxCLGdCQUFnQjtJQUNoQixNQUFNLE9BQU8sR0FBRyxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUMxRCxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFdkIsc0NBQXNDO0lBQ3RDLE1BQU0sSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDN0UsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgRmlsZUJ1ZmZlciBmcm9tICcuLi9saWIvZmlsZWJ1ZmYnO1xuXG50ZXN0KCdmaWxlIGJ1ZmZlcicsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgZmIgPSBuZXcgRmlsZUJ1ZmZlcignaGVsbG8uc291cmNlJyk7XG4gIGZiLndyaXRlKCdoZWxsbycpO1xuICBmYi53cml0ZSgnXFxuJyk7XG4gIGZiLndyaXRlKCd3b3JsZCcpO1xuXG4gIC8vIHNhdmUgdGhlIGZpbGVcbiAgY29uc3QgdGVtcGRpciA9IGF3YWl0IGZzLm1rZHRlbXAoJy90bXAvdGVzdC1maWxlLWJ1ZmZlcicpO1xuICBhd2FpdCBmYi5zYXZlKHRlbXBkaXIpO1xuXG4gIC8vIHZlcmlmeSB0aGUgY29udGVudHMgd2FzIGFzIGV4cGVjdGVkXG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgZnMucmVhZEZpbGUocGF0aC5qb2luKHRlbXBkaXIsIGZiLmZpbGVQYXRoKSkpLnRvU3RyaW5nKCk7XG4gIGV4cGVjdChkYXRhKS50b0JlKCdoZWxsb1xcbndvcmxkJyk7XG59KTtcbiJdfQ==
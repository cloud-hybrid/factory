"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const util_1 = require("util");
const lib_1 = require("../lib");
const readFile = util_1.promisify(fs.readFile);
test('big tree', async () => {
    const tree = new lib_1.AsciiTree('root', new lib_1.AsciiTree('child1', new lib_1.AsciiTree('child1.1'), new lib_1.AsciiTree('child1.2'), new lib_1.AsciiTree('child1.3'), new lib_1.AsciiTree('child1.4', new lib_1.AsciiTree('child1.4.1'), new lib_1.AsciiTree('child1.4.2'), new lib_1.AsciiTree('child1.4.3')), new lib_1.AsciiTree('child1.6'), new lib_1.AsciiTree('child1.7'), new lib_1.AsciiTree('child1.8')), new lib_1.AsciiTree('child2', new lib_1.AsciiTree('child2.1', new lib_1.AsciiTree('child2.1.1', new lib_1.AsciiTree('child.2.1.1.1'), new lib_1.AsciiTree('child.2.1.1.2'), new lib_1.AsciiTree('child.2.1.1.3', new lib_1.AsciiTree('child.2.1.1.3.1'), new lib_1.AsciiTree('child.2.1.1.3.2')), new lib_1.AsciiTree('child.2.1.1.4'), new lib_1.AsciiTree('child.2.1.1.5'), new lib_1.AsciiTree('child.2.1.1.5')), new lib_1.AsciiTree('child2.1.2'))), new lib_1.AsciiTree('child3'));
    await diff(tree, 'big.expected.txt');
});
test('basic example', async () => {
    const tree = new lib_1.AsciiTree('root');
    tree.add(new lib_1.AsciiTree('child1'));
    tree.add(new lib_1.AsciiTree('child2', new lib_1.AsciiTree('grandchild1'), new lib_1.AsciiTree('grandchild2')));
    tree.add(new lib_1.AsciiTree('child3'));
    await diff(tree, 'basic.expected.txt');
});
test('extensability', async () => {
    class TitleNode extends lib_1.AsciiTree {
        constructor(title, ...children) {
            super([title.toLocaleUpperCase(), '='.repeat(title.length)].join('\n'), ...children);
        }
    }
    class KeyValueNode extends lib_1.AsciiTree {
        constructor(key, value) {
            super(`${key}: ${value}`);
        }
    }
    const tree = new lib_1.AsciiTree();
    tree.add(new TitleNode('props', new KeyValueNode('shape', 'circle'), new KeyValueNode('color', 'red'), new KeyValueNode('background', 'blue')));
    tree.add(new TitleNode('dimensions', new KeyValueNode('width', '30px'), new KeyValueNode('height', '40px')));
    await diff(tree, 'extend.expected.txt');
});
test('multiline', async () => {
    class MultiLine extends lib_1.AsciiTree {
        constructor(line, times) {
            let text = '';
            for (let i = 0; i < times; ++i) {
                text += `${line} [#${i}]`;
                if (i < times - 1) {
                    text += '\n';
                }
            }
            super(text);
        }
    }
    const multi = new MultiLine('hello-child-A', 3);
    multi.add(new lib_1.AsciiTree('child of multi', new MultiLine('boom', 3)));
    multi.add(new lib_1.AsciiTree('multi\nline\nchild-of-multi'));
    const tree = new lib_1.AsciiTree('root', new lib_1.AsciiTree('hello', multi, new MultiLine('hello-child-B', 10), new lib_1.AsciiTree('just-a-node')), new lib_1.AsciiTree('world'), new lib_1.AsciiTree('boom', new lib_1.AsciiTree('trach', new MultiLine('multi', 4))));
    await diff(tree, 'multiline.expected.txt');
});
test('toString', () => {
    const tree = new lib_1.AsciiTree('root');
    tree.add(new lib_1.AsciiTree('1'));
    tree.add(new lib_1.AsciiTree('2', new lib_1.AsciiTree('2.1'), new lib_1.AsciiTree('2.2')));
    tree.add(new lib_1.AsciiTree('3'));
    expect(tree.toString()).toEqual(`root
 ├── 1
 ├─┬ 2
 │ ├── 2.1
 │ └── 2.2
 └── 3
`);
});
async function diff(tree, expectedFile) {
    const expectedFilePath = path.join(__dirname, expectedFile);
    const actual = tree.toString();
    const expected = (await readFile(expectedFilePath)).toString();
    expect(actual).toStrictEqual(expected);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHJlZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUM3QiwrQkFBaUM7QUFFakMsZ0NBQW1DO0FBRW5DLE1BQU0sUUFBUSxHQUFHLGdCQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBRXhDLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDMUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxlQUFTLENBQ3hCLE1BQU0sRUFDTixJQUFJLGVBQVMsQ0FDWCxRQUFRLEVBQ1IsSUFBSSxlQUFTLENBQUMsVUFBVSxDQUFDLEVBQ3pCLElBQUksZUFBUyxDQUFDLFVBQVUsQ0FBQyxFQUN6QixJQUFJLGVBQVMsQ0FBQyxVQUFVLENBQUMsRUFDekIsSUFBSSxlQUFTLENBQ1gsVUFBVSxFQUNWLElBQUksZUFBUyxDQUFDLFlBQVksQ0FBQyxFQUMzQixJQUFJLGVBQVMsQ0FBQyxZQUFZLENBQUMsRUFDM0IsSUFBSSxlQUFTLENBQUMsWUFBWSxDQUFDLENBQzVCLEVBQ0QsSUFBSSxlQUFTLENBQUMsVUFBVSxDQUFDLEVBQ3pCLElBQUksZUFBUyxDQUFDLFVBQVUsQ0FBQyxFQUN6QixJQUFJLGVBQVMsQ0FBQyxVQUFVLENBQUMsQ0FDMUIsRUFDRCxJQUFJLGVBQVMsQ0FDWCxRQUFRLEVBQ1IsSUFBSSxlQUFTLENBQ1gsVUFBVSxFQUNWLElBQUksZUFBUyxDQUNYLFlBQVksRUFDWixJQUFJLGVBQVMsQ0FBQyxlQUFlLENBQUMsRUFDOUIsSUFBSSxlQUFTLENBQUMsZUFBZSxDQUFDLEVBQzlCLElBQUksZUFBUyxDQUNYLGVBQWUsRUFDZixJQUFJLGVBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxFQUNoQyxJQUFJLGVBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUNqQyxFQUNELElBQUksZUFBUyxDQUFDLGVBQWUsQ0FBQyxFQUM5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QUFDLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDOzs7Ozs7Q0FNakMsQ0FBQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSCxLQUFLLFVBQVUsSUFBSSxDQUFDLElBQWUsRUFBRSxZQUFvQjtJQUN2RCxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQzVELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMvQixNQUFNLFFBQVEsR0FBRyxDQUFDLE1BQU0sUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMvRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAndXRpbCc7XG5cbmltcG9ydCB7IEFzY2lpVHJlZSB9IGZyb20gJy4uL2xpYic7XG5cbmNvbnN0IHJlYWRGaWxlID0gcHJvbWlzaWZ5KGZzLnJlYWRGaWxlKTtcblxudGVzdCgnYmlnIHRyZWUnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHRyZWUgPSBuZXcgQXNjaWlUcmVlKFxuICAgICdyb290JyxcbiAgICBuZXcgQXNjaWlUcmVlKFxuICAgICAgJ2NoaWxkMScsXG4gICAgICBuZXcgQXNjaWlUcmVlKCdjaGlsZDEuMScpLFxuICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQxLjInKSxcbiAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkMS4zJyksXG4gICAgICBuZXcgQXNjaWlUcmVlKFxuICAgICAgICAnY2hpbGQxLjQnLFxuICAgICAgICBuZXcgQXNjaWlUcmVlKCdjaGlsZDEuNC4xJyksXG4gICAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkMS40LjInKSxcbiAgICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQxLjQuMycpLFxuICAgICAgKSxcbiAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkMS42JyksXG4gICAgICBuZXcgQXNjaWlUcmVlKCdjaGlsZDEuNycpLFxuICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQxLjgnKSxcbiAgICApLFxuICAgIG5ldyBBc2NpaVRyZWUoXG4gICAgICAnY2hpbGQyJyxcbiAgICAgIG5ldyBBc2NpaVRyZWUoXG4gICAgICAgICdjaGlsZDIuMScsXG4gICAgICAgIG5ldyBBc2NpaVRyZWUoXG4gICAgICAgICAgJ2NoaWxkMi4xLjEnLFxuICAgICAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkLjIuMS4xLjEnKSxcbiAgICAgICAgICBuZXcgQXNjaWlUcmVlKCdjaGlsZC4yLjEuMS4yJyksXG4gICAgICAgICAgbmV3IEFzY2lpVHJlZShcbiAgICAgICAgICAgICdjaGlsZC4yLjEuMS4zJyxcbiAgICAgICAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkLjIuMS4xLjMuMScpLFxuICAgICAgICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQuMi4xLjEuMy4yJyksXG4gICAgICAgICAgKSxcbiAgICAgICAgICBuZXcgQXNjaWlUcmVlKCdjaGlsZC4yLjEuMS40JyksXG4gICAgICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQuMi4xLjEuNScpLFxuICAgICAgICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkLjIuMS4xLjUnKSxcbiAgICAgICAgKSxcbiAgICAgICAgbmV3IEFzY2lpVHJlZSgnY2hpbGQyLjEuMicpLFxuICAgICAgKSxcbiAgICApLFxuICAgIG5ldyBBc2NpaVRyZWUoJ2NoaWxkMycpLFxuICApO1xuXG4gIGF3YWl0IGRpZmYodHJlZSwgJ2JpZy5leHBlY3RlZC50eHQnKTtcbn0pO1xuXG50ZXN0KCdiYXNpYyBleGFtcGxlJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCB0cmVlID0gbmV3IEFzY2lpVHJlZSgncm9vdCcpO1xuXG4gIHRyZWUuYWRkKG5ldyBBc2NpaVRyZWUoJ2NoaWxkMScpKTtcblxuICB0cmVlLmFkZChcbiAgICBuZXcgQXNjaWlUcmVlKFxuICAgICAgJ2NoaWxkMicsXG4gICAgICBuZXcgQXNjaWlUcmVlKCdncmFuZGNoaWxkMScpLFxuICAgICAgbmV3IEFzY2lpVHJlZSgnZ3JhbmRjaGlsZDInKSxcbiAgICApLFxuICApO1xuXG4gIHRyZWUuYWRkKG5ldyBBc2NpaVRyZWUoJ2NoaWxkMycpKTtcblxuICBhd2FpdCBkaWZmKHRyZWUsICdiYXNpYy5leHBlY3RlZC50eHQnKTtcbn0pO1xuXG50ZXN0KCdleHRlbnNhYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICBjbGFzcyBUaXRsZU5vZGUgZXh0ZW5kcyBBc2NpaVRyZWUge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0aXRsZTogc3RyaW5nLCAuLi5jaGlsZHJlbjogQXNjaWlUcmVlW10pIHtcbiAgICAgIHN1cGVyKFxuICAgICAgICBbdGl0bGUudG9Mb2NhbGVVcHBlckNhc2UoKSwgJz0nLnJlcGVhdCh0aXRsZS5sZW5ndGgpXS5qb2luKCdcXG4nKSxcbiAgICAgICAgLi4uY2hpbGRyZW4sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNsYXNzIEtleVZhbHVlTm9kZSBleHRlbmRzIEFzY2lpVHJlZSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICBzdXBlcihgJHtrZXl9OiAke3ZhbHVlfWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRyZWUgPSBuZXcgQXNjaWlUcmVlKCk7XG5cbiAgdHJlZS5hZGQoXG4gICAgbmV3IFRpdGxlTm9kZShcbiAgICAgICdwcm9wcycsXG4gICAgICBuZXcgS2V5VmFsdWVOb2RlKCdzaGFwZScsICdjaXJjbGUnKSxcbiAgICAgIG5ldyBLZXlWYWx1ZU5vZGUoJ2NvbG9yJywgJ3JlZCcpLFxuICAgICAgbmV3IEtleVZhbHVlTm9kZSgnYmFja2dyb3VuZCcsICdibHVlJyksXG4gICAgKSxcbiAgKTtcblxuICB0cmVlLmFkZChcbiAgICBuZXcgVGl0bGVOb2RlKFxuICAgICAgJ2RpbWVuc2lvbnMnLFxuICAgICAgbmV3IEtleVZhbHVlTm9kZSgnd2lkdGgnLCAnMzBweCcpLFxuICAgICAgbmV3IEtleVZhbHVlTm9kZSgnaGVpZ2h0JywgJzQwcHgnKSxcbiAgICApLFxuICApO1xuXG4gIGF3YWl0IGRpZmYodHJlZSwgJ2V4dGVuZC5leHBlY3RlZC50eHQnKTtcbn0pO1xuXG50ZXN0KCdtdWx0aWxpbmUnLCBhc3luYyAoKSA9PiB7XG4gIGNsYXNzIE11bHRpTGluZSBleHRlbmRzIEFzY2lpVHJlZSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGxpbmU6IHN0cmluZywgdGltZXM6IG51bWJlcikge1xuICAgICAgbGV0IHRleHQgPSAnJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXM7ICsraSkge1xuICAgICAgICB0ZXh0ICs9IGAke2xpbmV9IFsjJHtpfV1gO1xuICAgICAgICBpZiAoaSA8IHRpbWVzIC0gMSkge1xuICAgICAgICAgIHRleHQgKz0gJ1xcbic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN1cGVyKHRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG11bHRpID0gbmV3IE11bHRpTGluZSgnaGVsbG8tY2hpbGQtQScsIDMpO1xuICBtdWx0aS5hZGQobmV3IEFzY2lpVHJlZSgnY2hpbGQgb2YgbXVsdGknLCBuZXcgTXVsdGlMaW5lKCdib29tJywgMykpKTtcblxuICBtdWx0aS5hZGQobmV3IEFzY2lpVHJlZSgnbXVsdGlcXG5saW5lXFxuY2hpbGQtb2YtbXVsdGknKSk7XG5cbiAgY29uc3QgdHJlZSA9IG5ldyBBc2NpaVRyZWUoXG4gICAgJ3Jvb3QnLFxuICAgIG5ldyBBc2NpaVRyZWUoXG4gICAgICAnaGVsbG8nLFxuICAgICAgbXVsdGksXG4gICAgICBuZXcgTXVsdGlMaW5lKCdoZWxsby1jaGlsZC1CJywgMTApLFxuICAgICAgbmV3IEFzY2lpVHJlZSgnanVzdC1hLW5vZGUnKSxcbiAgICApLFxuICAgIG5ldyBBc2NpaVRyZWUoJ3dvcmxkJyksXG4gICAgbmV3IEFzY2lpVHJlZSgnYm9vbScsIG5ldyBBc2NpaVRyZWUoJ3RyYWNoJywgbmV3IE11bHRpTGluZSgnbXVsdGknLCA0KSkpLFxuICApO1xuXG4gIGF3YWl0IGRpZmYodHJlZSwgJ211bHRpbGluZS5leHBlY3RlZC50eHQnKTtcbn0pO1xuXG50ZXN0KCd0b1N0cmluZycsICgpID0+IHtcbiAgY29uc3QgdHJlZSA9IG5ldyBBc2NpaVRyZWUoJ3Jvb3QnKTtcbiAgdHJlZS5hZGQobmV3IEFzY2lpVHJlZSgnMScpKTtcbiAgdHJlZS5hZGQobmV3IEFzY2lpVHJlZSgnMicsIG5ldyBBc2NpaVRyZWUoJzIuMScpLCBuZXcgQXNjaWlUcmVlKCcyLjInKSkpO1xuICB0cmVlLmFkZChuZXcgQXNjaWlUcmVlKCczJykpO1xuICBleHBlY3QodHJlZS50b1N0cmluZygpKS50b0VxdWFsKGByb290XG4g4pSc4pSA4pSAIDFcbiDilJzilIDilKwgMlxuIOKUgiDilJzilIDilIAgMi4xXG4g4pSCIOKUlOKUgOKUgCAyLjJcbiDilJTilIDilIAgM1xuYCk7XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gZGlmZih0cmVlOiBBc2NpaVRyZWUsIGV4cGVjdGVkRmlsZTogc3RyaW5nKSB7XG4gIGNvbnN0IGV4cGVjdGVkRmlsZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBleHBlY3RlZEZpbGUpO1xuICBjb25zdCBhY3R1YWwgPSB0cmVlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IGV4cGVjdGVkID0gKGF3YWl0IHJlYWRGaWxlKGV4cGVjdGVkRmlsZVBhdGgpKS50b1N0cmluZygpO1xuICBleHBlY3QoYWN0dWFsKS50b1N0cmljdEVxdWFsKGV4cGVjdGVkKTtcbn1cbiJdfQ==
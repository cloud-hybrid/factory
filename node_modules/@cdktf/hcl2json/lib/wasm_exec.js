"use strict";
/* eslint-disable unicorn/no-abusive-eslint-disable */
/* eslint-disable */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Go = void 0;
// Copyright 2018 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
// Mostly copied from
// https://github.com/ts-terraform/ts-terraform
const crypto_1 = __importDefault(require("crypto"));
const fs_1 = __importDefault(require("fs"));
const node_fetch_1 = __importDefault(require("node-fetch"));
const util_1 = require("util");
function asMemory(val) {
    if (val instanceof WebAssembly.Memory) {
        return val;
    }
    throw new Error("Export received from WASM was not a Memory object");
}
const performance = {
    now() {
        const [sec, nsec] = process.hrtime();
        return sec * 1000 + nsec / 1000000;
    },
};
// End of polyfills for common API.
const encoder = new util_1.TextEncoder();
const decoder = new util_1.TextDecoder("utf-8");
const timeOrigin = Date.now() - performance.now();
class Go {
    constructor() {
        this._inst = null; // intentionally breaking type safety
        this._values = [];
        this.mem = new DataView(new ArrayBuffer(0));
        this.exited = false;
        this._ids = new Map();
        this._idPool = [];
        this.argv = ["js"];
        this.env = {};
        this._resolveExitPromise = () => { };
        this._exitPromise = new Promise((resolve) => {
            // @ts-ignore
            this._resolveExitPromise = resolve;
        });
        this._pendingEvent = null;
        this._scheduledTimeouts = new Map();
        this._nextCallbackTimeoutID = 1;
        this._goRefCounts = [];
        this.exit = (code) => {
            if (code !== 0) {
                console.warn("exit code:", code);
            }
        };
        this.importObject = {
            go: {
                // Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)
                // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported
                // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).
                // This changes the SP, thus we have to update the SP used by the imported function.
                // func wasmExit(code int32)
                "runtime.wasmExit": (sp) => {
                    const code = this.mem.getInt32(sp + 8, true);
                    this.exited = true;
                    // @ts-ignore
                    delete this._inst;
                    // @ts-ignore
                    delete this._values;
                    // @ts-ignore
                    delete this._goRefCounts;
                    // @ts-ignore
                    delete this._ids;
                    // @ts-ignore
                    delete this._idPool;
                    this.exit(code);
                },
                // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)
                "runtime.wasmWrite": (sp) => {
                    const fd = this._getInt64(sp + 8);
                    const p = this._getInt64(sp + 16);
                    const n = this.mem.getInt32(sp + 24, true);
                    fs_1.default.writeSync(fd, new Uint8Array(asMemory(this._inst.exports.mem).buffer, p, n));
                },
                // func resetMemoryDataView()
                "runtime.resetMemoryDataView": (_sp) => {
                    this.mem = new DataView(asMemory(this._inst.exports.mem).buffer);
                },
                // func nanotime1() int64
                "runtime.nanotime1": (sp) => {
                    this._setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);
                },
                // func walltime1() (sec int64, nsec int32)
                "runtime.walltime1": (sp) => {
                    const msec = new Date().getTime();
                    this._setInt64(sp + 8, msec / 1000);
                    this.mem.setInt32(sp + 16, (msec % 1000) * 1000000, true);
                },
                // func scheduleTimeoutEvent(delay int64) int32
                "runtime.scheduleTimeoutEvent": (sp) => {
                    const id = this._nextCallbackTimeoutID;
                    this._nextCallbackTimeoutID++;
                    this._scheduledTimeouts.set(id, setTimeout(() => {
                        this._resume();
                        while (this._scheduledTimeouts.has(id)) {
                            // for some reason Go failed to register the timeout event, log and try again
                            // (temporary workaround for https://github.com/golang/go/issues/28975)
                            console.warn("scheduleTimeoutEvent: missed timeout event");
                            this._resume();
                        }
                    }, this._getInt64(sp + 8) + 1 // setTimeout has been seen to fire up to 1 millisecond early
                    ));
                    this.mem.setInt32(sp + 16, id, true);
                },
                // func clearTimeoutEvent(id int32)
                "runtime.clearTimeoutEvent": (sp) => {
                    const id = this.mem.getInt32(sp + 8, true);
                    clearTimeout(this._scheduledTimeouts.get(id));
                    this._scheduledTimeouts.delete(id);
                },
                // func getRandomData(r []byte)
                "runtime.getRandomData": (sp) => {
                    crypto_1.default.randomFillSync(this._loadSlice(sp + 8));
                },
                // func finalizeRef(v ref)
                "syscall/js.finalizeRef": (sp) => {
                    const id = this.mem.getUint32(sp + 8, true);
                    this._goRefCounts[id]--;
                    if (this._goRefCounts[id] === 0) {
                        const v = this._values[id];
                        this._values[id] = null;
                        this._ids.delete(v);
                        this._idPool.push(id);
                    }
                },
                // func stringVal(value string) ref
                "syscall/js.stringVal": (sp) => {
                    this._storeValue(sp + 24, this._loadString(sp + 8));
                },
                // func valueGet(v ref, p string) ref
                "syscall/js.valueGet": (sp) => {
                    const result = Reflect.get(this._loadValue(sp + 8), this._loadString(sp + 16));
                    if (typeof this._inst.exports.getsp !== "function") {
                        throw new Error("invalid type");
                    }
                    sp = this._inst.exports.getsp(); // see comment above
                    this._storeValue(sp + 32, result);
                },
                // func valueSet(v ref, p string, x ref)
                "syscall/js.valueSet": (sp) => {
                    Reflect.set(this._loadValue(sp + 8), this._loadString(sp + 16), this._loadValue(sp + 32));
                },
                // func valueDelete(v ref, p string)
                "syscall/js.valueDelete": (sp) => {
                    Reflect.deleteProperty(this._loadValue(sp + 8), this._loadString(sp + 16));
                },
                // func valueIndex(v ref, i int) ref
                "syscall/js.valueIndex": (sp) => {
                    this._storeValue(sp + 24, Reflect.get(this._loadValue(sp + 8), this._getInt64(sp + 16)));
                },
                // valueSetIndex(v ref, i int, x ref)
                "syscall/js.valueSetIndex": (sp) => {
                    Reflect.set(this._loadValue(sp + 8), this._getInt64(sp + 16), this._loadValue(sp + 24));
                },
                // func valueCall(v ref, m string, args []ref) (ref, bool)
                "syscall/js.valueCall": (sp) => {
                    try {
                        const v = this._loadValue(sp + 8);
                        const m = Reflect.get(v, this._loadString(sp + 16));
                        const args = this._loadSliceOfValues(sp + 32);
                        const result = Reflect.apply(m, v, args);
                        if (typeof this._inst.exports.getsp !== "function") {
                            throw new Error("invalid type");
                        }
                        sp = this._inst.exports.getsp(); // see comment above
                        this._storeValue(sp + 56, result);
                        this.mem.setUint8(sp + 64, 1);
                    }
                    catch (err) {
                        this._storeValue(sp + 56, err);
                        this.mem.setUint8(sp + 64, 0);
                    }
                },
                // func valueInvoke(v ref, args []ref) (ref, bool)
                "syscall/js.valueInvoke": (sp) => {
                    try {
                        const v = this._loadValue(sp + 8);
                        const args = this._loadSliceOfValues(sp + 16);
                        const result = Reflect.apply(v, undefined, args);
                        if (typeof this._inst.exports.getsp !== "function") {
                            throw new Error("invalid type");
                        }
                        sp = this._inst.exports.getsp(); // see comment above
                        this._storeValue(sp + 40, result);
                        this.mem.setUint8(sp + 48, 1);
                    }
                    catch (err) {
                        this._storeValue(sp + 40, err);
                        this.mem.setUint8(sp + 48, 0);
                    }
                },
                // func valueNew(v ref, args []ref) (ref, bool)
                "syscall/js.valueNew": (sp) => {
                    try {
                        const v = this._loadValue(sp + 8);
                        const args = this._loadSliceOfValues(sp + 16);
                        const result = Reflect.construct(v, args);
                        if (typeof this._inst.exports.getsp !== "function") {
                            throw new Error("invalid type");
                        }
                        sp = this._inst.exports.getsp(); // see comment above
                        this._storeValue(sp + 40, result);
                        this.mem.setUint8(sp + 48, 1);
                    }
                    catch (err) {
                        this._storeValue(sp + 40, err);
                        this.mem.setUint8(sp + 48, 0);
                    }
                },
                // func valueLength(v ref) int
                "syscall/js.valueLength": (sp) => {
                    this._setInt64(sp + 16, this._loadValue(sp + 8).length);
                },
                // valuePrepareString(v ref) (ref, int)
                "syscall/js.valuePrepareString": (sp) => {
                    const str = encoder.encode(String(this._loadValue(sp + 8)));
                    this._storeValue(sp + 16, str);
                    this._setInt64(sp + 24, str.length);
                },
                // valueLoadString(v ref, b []byte)
                "syscall/js.valueLoadString": (sp) => {
                    const str = this._loadValue(sp + 8);
                    this._loadSlice(sp + 16).set(str);
                },
                // func valueInstanceOf(v ref, t ref) bool
                "syscall/js.valueInstanceOf": (sp) => {
                    this.mem.setUint8(sp + 24, this._loadValue(sp + 8) instanceof this._loadValue(sp + 16)
                        ? 1
                        : 0);
                },
                // func copyBytesToGo(dst []byte, src ref) (int, bool)
                "syscall/js.copyBytesToGo": (sp) => {
                    const dst = this._loadSlice(sp + 8);
                    const src = this._loadValue(sp + 32);
                    if (!(src instanceof Uint8Array)) {
                        this.mem.setUint8(sp + 48, 0);
                        return;
                    }
                    const toCopy = src.subarray(0, dst.length);
                    dst.set(toCopy);
                    this._setInt64(sp + 40, toCopy.length);
                    this.mem.setUint8(sp + 48, 1);
                },
                // func copyBytesToJS(dst ref, src []byte) (int, bool)
                "syscall/js.copyBytesToJS": (sp) => {
                    const dst = this._loadValue(sp + 8);
                    const src = this._loadSlice(sp + 16);
                    if (!(dst instanceof Uint8Array)) {
                        this.mem.setUint8(sp + 48, 0);
                        return;
                    }
                    const toCopy = src.subarray(0, dst.length);
                    dst.set(toCopy);
                    this._setInt64(sp + 40, toCopy.length);
                    this.mem.setUint8(sp + 48, 1);
                },
                debug: (value) => {
                    console.log(value);
                },
            },
        };
        this._resume = () => {
            if (this.exited) {
                throw new Error("Go program has already exited");
            }
            if (typeof this._inst.exports.resume === "function") {
                this._inst.exports.resume();
            }
            if (this.exited) {
                this._resolveExitPromise();
            }
        };
        this._setInt64 = (addr, v) => {
            this.mem.setUint32(addr + 0, v, true);
            this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);
        };
        this._getInt64 = (addr) => {
            const low = this.mem.getUint32(addr + 0, true);
            const high = this.mem.getInt32(addr + 4, true);
            return low + high * 4294967296;
        };
        this._loadValue = (addr) => {
            const f = this.mem.getFloat64(addr, true);
            if (f === 0) {
                return undefined;
            }
            if (!isNaN(f)) {
                return f;
            }
            const id = this.mem.getUint32(addr, true);
            return this._values[id];
        };
        this._storeValue = (addr, v) => {
            const nanHead = 0x7ff80000;
            if (typeof v === "number") {
                if (isNaN(v)) {
                    this.mem.setUint32(addr + 4, nanHead, true);
                    this.mem.setUint32(addr, 0, true);
                    return;
                }
                if (v === 0) {
                    this.mem.setUint32(addr + 4, nanHead, true);
                    this.mem.setUint32(addr, 1, true);
                    return;
                }
                this.mem.setFloat64(addr, v, true);
                return;
            }
            switch (v) {
                case undefined:
                    this.mem.setFloat64(addr, 0, true);
                    return;
                case null:
                    this.mem.setUint32(addr + 4, nanHead, true);
                    this.mem.setUint32(addr, 2, true);
                    return;
                case true:
                    this.mem.setUint32(addr + 4, nanHead, true);
                    this.mem.setUint32(addr, 3, true);
                    return;
                case false:
                    this.mem.setUint32(addr + 4, nanHead, true);
                    this.mem.setUint32(addr, 4, true);
                    return;
            }
            let id = this._ids.get(v);
            if (id === undefined) {
                id = this._idPool.pop();
                if (id === undefined) {
                    id = this._values.length;
                }
                this._values[id] = v;
                this._goRefCounts[id] = 0;
                this._ids.set(v, id);
            }
            this._goRefCounts[id]++;
            let typeFlag = 1;
            switch (typeof v) {
                case "string":
                    typeFlag = 2;
                    break;
                case "symbol":
                    typeFlag = 3;
                    break;
                case "function":
                    typeFlag = 4;
                    break;
            }
            this.mem.setUint32(addr + 4, nanHead | typeFlag, true);
            this.mem.setUint32(addr, id, true);
        };
        this._loadSlice = (addr) => {
            const array = this._getInt64(addr + 0);
            const len = this._getInt64(addr + 8);
            return new Uint8Array(asMemory(this._inst.exports.mem).buffer, array, len);
        };
        this._loadSliceOfValues = (addr) => {
            const array = this._getInt64(addr + 0);
            const len = this._getInt64(addr + 8);
            const a = new Array(len);
            for (let i = 0; i < len; i++) {
                a[i] = this._loadValue(array + i * 8);
            }
            return a;
        };
        this._loadString = (addr) => {
            const saddr = this._getInt64(addr + 0);
            const len = this._getInt64(addr + 8);
            return decoder.decode(new DataView(asMemory(this._inst.exports.mem).buffer, saddr, len));
        };
    }
    async run(instance, thing = {}) {
        this._inst = instance;
        this.mem = new DataView(asMemory(this._inst.exports.mem).buffer);
        this._values = [
            // JS values that Go currently has references to, indexed by reference id
            NaN,
            0,
            null,
            true,
            false,
            {
                Array,
                crypto: crypto_1.default,
                fetch: node_fetch_1.default,
                fs: fs_1.default,
                Object,
                process,
                Uint8Array,
                ...thing,
            },
            this,
        ];
        this._goRefCounts = []; // number of references that Go has to a JS value, indexed by reference id
        this._ids = new Map(); // mapping from JS values to reference ids
        this._idPool = []; // unused ids that have been garbage collected
        this.exited = false; // whether the Go program has exited
        // Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.
        let offset = 4096;
        const strPtr = (str) => {
            const ptr = offset;
            const bytes = encoder.encode(str + "\0");
            new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);
            offset += bytes.length;
            if (offset % 8 !== 0) {
                offset += 8 - (offset % 8);
            }
            return ptr;
        };
        const argc = this.argv.length;
        const argvPtrs = [];
        this.argv.forEach((arg) => {
            argvPtrs.push(strPtr(arg));
        });
        argvPtrs.push(0);
        const keys = Object.keys(this.env).sort();
        keys.forEach((key) => {
            argvPtrs.push(strPtr(`${key}=${this.env[key]}`));
        });
        argvPtrs.push(0);
        const argv = offset;
        argvPtrs.forEach((ptr) => {
            this.mem.setUint32(offset, ptr, true);
            this.mem.setUint32(offset + 4, 0, true);
            offset += 8;
        });
        if (typeof this._inst.exports.run === "function")
            this._inst.exports.run(argc, argv);
        if (this.exited) {
            this._resolveExitPromise();
        }
        await this._exitPromise;
    }
    _makeFuncWrapper(id) {
        return (...args) => {
            const event = { id: id, this: this, args };
            this._pendingEvent = event;
            this._resume();
            return event.result;
        };
    }
}
exports.Go = Go;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FzbV9leGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2FzbV9leGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzREFBc0Q7QUFDdEQsb0JBQW9COzs7Ozs7QUFFcEIsc0RBQXNEO0FBQ3RELHFEQUFxRDtBQUNyRCxpREFBaUQ7QUFFakQscUJBQXFCO0FBQ3JCLCtDQUErQztBQUUvQyxvREFBNEI7QUFDNUIsNENBQW9CO0FBQ3BCLDREQUErQjtBQUMvQiwrQkFBZ0Q7QUFFaEQsU0FBUyxRQUFRLENBQUMsR0FBNEI7SUFDNUMsSUFBSSxHQUFHLFlBQVksV0FBVyxDQUFDLE1BQU0sRUFBRTtRQUNyQyxPQUFPLEdBQUcsQ0FBQztLQUNaO0lBQ0QsTUFBTSxJQUFJLEtBQUssQ0FBQyxtREFBbUQsQ0FBQyxDQUFDO0FBQ3ZFLENBQUM7QUFTRCxNQUFNLFdBQVcsR0FBRztJQUNsQixHQUFHO1FBQ0QsTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDckMsT0FBTyxHQUFHLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxPQUFPLENBQUM7SUFDckMsQ0FBQztDQUNGLENBQUM7QUFFRixtQ0FBbUM7QUFFbkMsTUFBTSxPQUFPLEdBQUcsSUFBSSxrQkFBVyxFQUFFLENBQUM7QUFDbEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxrQkFBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRXpDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFbEQsTUFBYSxFQUFFO0lBQWY7UUFDRSxVQUFLLEdBQXlCLElBQW1DLENBQUMsQ0FBQyxxQ0FBcUM7UUFDeEcsWUFBTyxHQUFjLEVBQUUsQ0FBQztRQUN4QixRQUFHLEdBQWEsSUFBSSxRQUFRLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRCxX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O1lBQzlDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7U0FDNUI7UUFDRCxNQUFNLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDMUIsQ0FBQztJQWNELGdCQUFnQixDQUFDLEVBQVU7UUFDekIsT0FBTyxDQUFDLEdBQUcsSUFBZSxFQUFFLEVBQUU7WUFDNUIsTUFBTSxLQUFLLEdBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7WUFDbEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2YsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ3RCLENBQUMsQ0FBQztJQUNKLENBQUM7Q0FnSEY7QUFsZkQsZ0JBa2ZDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgdW5pY29ybi9uby1hYnVzaXZlLWVzbGludC1kaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vLyBDb3B5cmlnaHQgMjAxOCBUaGUgR28gQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlXG4vLyBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuXG5cbi8vIE1vc3RseSBjb3BpZWQgZnJvbVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RzLXRlcnJhZm9ybS90cy10ZXJyYWZvcm1cblxuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcIm5vZGUtZmV0Y2hcIjtcbmltcG9ydCB7IFRleHREZWNvZGVyLCBUZXh0RW5jb2RlciB9IGZyb20gXCJ1dGlsXCI7XG5cbmZ1bmN0aW9uIGFzTWVtb3J5KHZhbDogV2ViQXNzZW1ibHkuRXhwb3J0VmFsdWUpIHtcbiAgaWYgKHZhbCBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5Lk1lbW9yeSkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiRXhwb3J0IHJlY2VpdmVkIGZyb20gV0FTTSB3YXMgbm90IGEgTWVtb3J5IG9iamVjdFwiKTtcbn1cblxuaW50ZXJmYWNlIEV2ZW50IHtcbiAgaWQ6IG51bWJlcjtcbiAgdGhpczogR287XG4gIGFyZ3M6IHVua25vd25bXTtcbiAgcmVzdWx0PzogdW5rbm93bjtcbn1cblxuY29uc3QgcGVyZm9ybWFuY2UgPSB7XG4gIG5vdygpIHtcbiAgICBjb25zdCBbc2VjLCBuc2VjXSA9IHByb2Nlc3MuaHJ0aW1lKCk7XG4gICAgcmV0dXJuIHNlYyAqIDEwMDAgKyBuc2VjIC8gMTAwMDAwMDtcbiAgfSxcbn07XG5cbi8vIEVuZCBvZiBwb2x5ZmlsbHMgZm9yIGNvbW1vbiBBUEkuXG5cbmNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcblxuY29uc3QgdGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTtcblxuZXhwb3J0IGNsYXNzIEdvIHtcbiAgX2luc3Q6IFdlYkFzc2VtYmx5Lkluc3RhbmNlID0gbnVsbCBhcyBhbnkgYXMgV2ViQXNzZW1ibHkuSW5zdGFuY2U7IC8vIGludGVudGlvbmFsbHkgYnJlYWtpbmcgdHlwZSBzYWZldHlcbiAgX3ZhbHVlczogdW5rbm93bltdID0gW107XG4gIG1lbTogRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDApKTtcbiAgZXhpdGVkID0gZmFsc2U7XG4gIF9pZHMgPSBuZXcgTWFwKCk7XG4gIF9pZFBvb2w6IHVua25vd25bXSA9IFtdO1xuXG4gIGFyZ3YgPSBbXCJqc1wiXTtcbiAgZW52OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIF9yZXNvbHZlRXhpdFByb21pc2U6ICgpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgX2V4aXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdGhpcy5fcmVzb2x2ZUV4aXRQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG4gIF9wZW5kaW5nRXZlbnQ6IEV2ZW50IHwgbnVsbCA9IG51bGw7XG4gIF9zY2hlZHVsZWRUaW1lb3V0cyA9IG5ldyBNYXAoKTtcbiAgX25leHRDYWxsYmFja1RpbWVvdXRJRCA9IDE7XG5cbiAgX2dvUmVmQ291bnRzOiBudW1iZXJbXSA9IFtdO1xuXG4gIGV4aXQgPSAoY29kZTogbnVtYmVyKSA9PiB7XG4gICAgaWYgKGNvZGUgIT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihcImV4aXQgY29kZTpcIiwgY29kZSk7XG4gICAgfVxuICB9O1xuXG4gIGltcG9ydE9iamVjdCA9IHtcbiAgICBnbzoge1xuICAgICAgLy8gR28ncyBTUCBkb2VzIG5vdCBjaGFuZ2UgYXMgbG9uZyBhcyBubyBHbyBjb2RlIGlzIHJ1bm5pbmcuIFNvbWUgb3BlcmF0aW9ucyAoZS5nLiBjYWxscywgZ2V0dGVycyBhbmQgc2V0dGVycylcbiAgICAgIC8vIG1heSBzeW5jaHJvbm91c2x5IHRyaWdnZXIgYSBHbyBldmVudCBoYW5kbGVyLiBUaGlzIG1ha2VzIEdvIGNvZGUgZ2V0IGV4ZWN1dGVkIGluIHRoZSBtaWRkbGUgb2YgdGhlIGltcG9ydGVkXG4gICAgICAvLyBmdW5jdGlvbi4gQSBnb3JvdXRpbmUgY2FuIHN3aXRjaCB0byBhIG5ldyBzdGFjayBpZiB0aGUgY3VycmVudCBzdGFjayBpcyB0b28gc21hbGwgKHNlZSBtb3Jlc3RhY2sgZnVuY3Rpb24pLlxuICAgICAgLy8gVGhpcyBjaGFuZ2VzIHRoZSBTUCwgdGh1cyB3ZSBoYXZlIHRvIHVwZGF0ZSB0aGUgU1AgdXNlZCBieSB0aGUgaW1wb3J0ZWQgZnVuY3Rpb24uXG5cbiAgICAgIC8vIGZ1bmMgd2FzbUV4aXQoY29kZSBpbnQzMilcbiAgICAgIFwicnVudGltZS53YXNtRXhpdFwiOiAoc3A6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5tZW0uZ2V0SW50MzIoc3AgKyA4LCB0cnVlKTtcbiAgICAgICAgdGhpcy5leGl0ZWQgPSB0cnVlO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9pbnN0O1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRlbGV0ZSB0aGlzLl92YWx1ZXM7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZGVsZXRlIHRoaXMuX2dvUmVmQ291bnRzO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9pZHM7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZGVsZXRlIHRoaXMuX2lkUG9vbDtcbiAgICAgICAgdGhpcy5leGl0KGNvZGUpO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB3YXNtV3JpdGUoZmQgdWludHB0ciwgcCB1bnNhZmUuUG9pbnRlciwgbiBpbnQzMilcbiAgICAgIFwicnVudGltZS53YXNtV3JpdGVcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgZmQgPSB0aGlzLl9nZXRJbnQ2NChzcCArIDgpO1xuICAgICAgICBjb25zdCBwID0gdGhpcy5fZ2V0SW50NjQoc3AgKyAxNik7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDI0LCB0cnVlKTtcbiAgICAgICAgZnMud3JpdGVTeW5jKFxuICAgICAgICAgIGZkLFxuICAgICAgICAgIG5ldyBVaW50OEFycmF5KGFzTWVtb3J5KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0pLmJ1ZmZlciwgcCwgbilcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgcmVzZXRNZW1vcnlEYXRhVmlldygpXG4gICAgICBcInJ1bnRpbWUucmVzZXRNZW1vcnlEYXRhVmlld1wiOiAoX3NwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5tZW0gPSBuZXcgRGF0YVZpZXcoYXNNZW1vcnkodGhpcy5faW5zdC5leHBvcnRzLm1lbSkuYnVmZmVyKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgbmFub3RpbWUxKCkgaW50NjRcbiAgICAgIFwicnVudGltZS5uYW5vdGltZTFcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0SW50NjQoc3AgKyA4LCAodGltZU9yaWdpbiArIHBlcmZvcm1hbmNlLm5vdygpKSAqIDEwMDAwMDApO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB3YWxsdGltZTEoKSAoc2VjIGludDY0LCBuc2VjIGludDMyKVxuICAgICAgXCJydW50aW1lLndhbGx0aW1lMVwiOiAoc3A6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBtc2VjID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuX3NldEludDY0KHNwICsgOCwgbXNlYyAvIDEwMDApO1xuICAgICAgICB0aGlzLm1lbS5zZXRJbnQzMihzcCArIDE2LCAobXNlYyAlIDEwMDApICogMTAwMDAwMCwgdHJ1ZSk7XG4gICAgICB9LFxuXG4gICAgICAvLyBmdW5jIHNjaGVkdWxlVGltZW91dEV2ZW50KGRlbGF5IGludDY0KSBpbnQzMlxuICAgICAgXCJydW50aW1lLnNjaGVkdWxlVGltZW91dEV2ZW50XCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5fbmV4dENhbGxiYWNrVGltZW91dElEO1xuICAgICAgICB0aGlzLl9uZXh0Q2FsbGJhY2tUaW1lb3V0SUQrKztcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVkVGltZW91dHMuc2V0KFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuX3Jlc3VtZSgpO1xuICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fc2NoZWR1bGVkVGltZW91dHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBHbyBmYWlsZWQgdG8gcmVnaXN0ZXIgdGhlIHRpbWVvdXQgZXZlbnQsIGxvZyBhbmQgdHJ5IGFnYWluXG4gICAgICAgICAgICAgICAgLy8gKHRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vZ29sYW5nL2dvL2lzc3Vlcy8yODk3NSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJzY2hlZHVsZVRpbWVvdXRFdmVudDogbWlzc2VkIHRpbWVvdXQgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzdW1lKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzLl9nZXRJbnQ2NChzcCArIDgpICsgMSAvLyBzZXRUaW1lb3V0IGhhcyBiZWVuIHNlZW4gdG8gZmlyZSB1cCB0byAxIG1pbGxpc2Vjb25kIGVhcmx5XG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm1lbS5zZXRJbnQzMihzcCArIDE2LCBpZCwgdHJ1ZSk7XG4gICAgICB9LFxuXG4gICAgICAvLyBmdW5jIGNsZWFyVGltZW91dEV2ZW50KGlkIGludDMyKVxuICAgICAgXCJydW50aW1lLmNsZWFyVGltZW91dEV2ZW50XCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5tZW0uZ2V0SW50MzIoc3AgKyA4LCB0cnVlKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3NjaGVkdWxlZFRpbWVvdXRzLmdldChpZCkpO1xuICAgICAgICB0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cy5kZWxldGUoaWQpO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyBnZXRSYW5kb21EYXRhKHIgW11ieXRlKVxuICAgICAgXCJydW50aW1lLmdldFJhbmRvbURhdGFcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgY3J5cHRvLnJhbmRvbUZpbGxTeW5jKHRoaXMuX2xvYWRTbGljZShzcCArIDgpKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgZmluYWxpemVSZWYodiByZWYpXG4gICAgICBcInN5c2NhbGwvanMuZmluYWxpemVSZWZcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLm1lbS5nZXRVaW50MzIoc3AgKyA4LCB0cnVlKTtcbiAgICAgICAgdGhpcy5fZ29SZWZDb3VudHNbaWRdLS07XG4gICAgICAgIGlmICh0aGlzLl9nb1JlZkNvdW50c1tpZF0gPT09IDApIHtcbiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fdmFsdWVzW2lkXTtcbiAgICAgICAgICB0aGlzLl92YWx1ZXNbaWRdID0gbnVsbDtcbiAgICAgICAgICB0aGlzLl9pZHMuZGVsZXRlKHYpO1xuICAgICAgICAgIHRoaXMuX2lkUG9vbC5wdXNoKGlkKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyBzdHJpbmdWYWwodmFsdWUgc3RyaW5nKSByZWZcbiAgICAgIFwic3lzY2FsbC9qcy5zdHJpbmdWYWxcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5fc3RvcmVWYWx1ZShzcCArIDI0LCB0aGlzLl9sb2FkU3RyaW5nKHNwICsgOCkpO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB2YWx1ZUdldCh2IHJlZiwgcCBzdHJpbmcpIHJlZlxuICAgICAgXCJzeXNjYWxsL2pzLnZhbHVlR2V0XCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuZ2V0KFxuICAgICAgICAgIHRoaXMuX2xvYWRWYWx1ZShzcCArIDgpIGFzIG9iamVjdCxcbiAgICAgICAgICB0aGlzLl9sb2FkU3RyaW5nKHNwICsgMTYpXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5faW5zdC5leHBvcnRzLmdldHNwICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgc3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKTsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcbiAgICAgICAgdGhpcy5fc3RvcmVWYWx1ZShzcCArIDMyLCByZXN1bHQpO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB2YWx1ZVNldCh2IHJlZiwgcCBzdHJpbmcsIHggcmVmKVxuICAgICAgXCJzeXNjYWxsL2pzLnZhbHVlU2V0XCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIFJlZmxlY3Quc2V0KFxuICAgICAgICAgIHRoaXMuX2xvYWRWYWx1ZShzcCArIDgpIGFzIG9iamVjdCxcbiAgICAgICAgICB0aGlzLl9sb2FkU3RyaW5nKHNwICsgMTYpLFxuICAgICAgICAgIHRoaXMuX2xvYWRWYWx1ZShzcCArIDMyKVxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB2YWx1ZURlbGV0ZSh2IHJlZiwgcCBzdHJpbmcpXG4gICAgICBcInN5c2NhbGwvanMudmFsdWVEZWxldGVcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShcbiAgICAgICAgICB0aGlzLl9sb2FkVmFsdWUoc3AgKyA4KSBhcyBvYmplY3QsXG4gICAgICAgICAgdGhpcy5fbG9hZFN0cmluZyhzcCArIDE2KVxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB2YWx1ZUluZGV4KHYgcmVmLCBpIGludCkgcmVmXG4gICAgICBcInN5c2NhbGwvanMudmFsdWVJbmRleFwiOiAoc3A6IG51bWJlcikgPT4ge1xuICAgICAgICB0aGlzLl9zdG9yZVZhbHVlKFxuICAgICAgICAgIHNwICsgMjQsXG4gICAgICAgICAgUmVmbGVjdC5nZXQoXG4gICAgICAgICAgICB0aGlzLl9sb2FkVmFsdWUoc3AgKyA4KSBhcyBvYmplY3QsXG4gICAgICAgICAgICB0aGlzLl9nZXRJbnQ2NChzcCArIDE2KVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHZhbHVlU2V0SW5kZXgodiByZWYsIGkgaW50LCB4IHJlZilcbiAgICAgIFwic3lzY2FsbC9qcy52YWx1ZVNldEluZGV4XCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIFJlZmxlY3Quc2V0KFxuICAgICAgICAgIHRoaXMuX2xvYWRWYWx1ZShzcCArIDgpIGFzIG9iamVjdCxcbiAgICAgICAgICB0aGlzLl9nZXRJbnQ2NChzcCArIDE2KSxcbiAgICAgICAgICB0aGlzLl9sb2FkVmFsdWUoc3AgKyAyNClcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgdmFsdWVDYWxsKHYgcmVmLCBtIHN0cmluZywgYXJncyBbXXJlZikgKHJlZiwgYm9vbClcbiAgICAgIFwic3lzY2FsbC9qcy52YWx1ZUNhbGxcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fbG9hZFZhbHVlKHNwICsgOCkgYXMgb2JqZWN0O1xuICAgICAgICAgIGNvbnN0IG0gPSBSZWZsZWN0LmdldCh2LCB0aGlzLl9sb2FkU3RyaW5nKHNwICsgMTYpKTtcbiAgICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5fbG9hZFNsaWNlT2ZWYWx1ZXMoc3AgKyAzMik7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShtLCB2LCBhcmdzKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHR5cGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCk7IC8vIHNlZSBjb21tZW50IGFib3ZlXG4gICAgICAgICAgdGhpcy5fc3RvcmVWYWx1ZShzcCArIDU2LCByZXN1bHQpO1xuICAgICAgICAgIHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNjQsIDEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLl9zdG9yZVZhbHVlKHNwICsgNTYsIGVycik7XG4gICAgICAgICAgdGhpcy5tZW0uc2V0VWludDgoc3AgKyA2NCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgdmFsdWVJbnZva2UodiByZWYsIGFyZ3MgW11yZWYpIChyZWYsIGJvb2wpXG4gICAgICBcInN5c2NhbGwvanMudmFsdWVJbnZva2VcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fbG9hZFZhbHVlKHNwICsgOCkgYXMgRnVuY3Rpb247XG4gICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuX2xvYWRTbGljZU9mVmFsdWVzKHNwICsgMTYpO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkodiwgdW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHR5cGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCk7IC8vIHNlZSBjb21tZW50IGFib3ZlXG4gICAgICAgICAgdGhpcy5fc3RvcmVWYWx1ZShzcCArIDQwLCByZXN1bHQpO1xuICAgICAgICAgIHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLl9zdG9yZVZhbHVlKHNwICsgNDAsIGVycik7XG4gICAgICAgICAgdGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgdmFsdWVOZXcodiByZWYsIGFyZ3MgW11yZWYpIChyZWYsIGJvb2wpXG4gICAgICBcInN5c2NhbGwvanMudmFsdWVOZXdcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fbG9hZFZhbHVlKHNwICsgOCkgYXMgRnVuY3Rpb247XG4gICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuX2xvYWRTbGljZU9mVmFsdWVzKHNwICsgMTYpO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KHYsIGFyZ3MpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5faW5zdC5leHBvcnRzLmdldHNwICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgdHlwZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKTsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcbiAgICAgICAgICB0aGlzLl9zdG9yZVZhbHVlKHNwICsgNDAsIHJlc3VsdCk7XG4gICAgICAgICAgdGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRoaXMuX3N0b3JlVmFsdWUoc3AgKyA0MCwgZXJyKTtcbiAgICAgICAgICB0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gZnVuYyB2YWx1ZUxlbmd0aCh2IHJlZikgaW50XG4gICAgICBcInN5c2NhbGwvanMudmFsdWVMZW5ndGhcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0SW50NjQoc3AgKyAxNiwgKHRoaXMuX2xvYWRWYWx1ZShzcCArIDgpIGFzIHN0cmluZykubGVuZ3RoKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHZhbHVlUHJlcGFyZVN0cmluZyh2IHJlZikgKHJlZiwgaW50KVxuICAgICAgXCJzeXNjYWxsL2pzLnZhbHVlUHJlcGFyZVN0cmluZ1wiOiAoc3A6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBzdHIgPSBlbmNvZGVyLmVuY29kZShTdHJpbmcodGhpcy5fbG9hZFZhbHVlKHNwICsgOCkpKTtcbiAgICAgICAgdGhpcy5fc3RvcmVWYWx1ZShzcCArIDE2LCBzdHIpO1xuICAgICAgICB0aGlzLl9zZXRJbnQ2NChzcCArIDI0LCBzdHIubGVuZ3RoKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHZhbHVlTG9hZFN0cmluZyh2IHJlZiwgYiBbXWJ5dGUpXG4gICAgICBcInN5c2NhbGwvanMudmFsdWVMb2FkU3RyaW5nXCI6IChzcDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0ciA9IHRoaXMuX2xvYWRWYWx1ZShzcCArIDgpO1xuICAgICAgICB0aGlzLl9sb2FkU2xpY2Uoc3AgKyAxNikuc2V0KHN0ciBhcyBBcnJheUxpa2U8bnVtYmVyPik7XG4gICAgICB9LFxuXG4gICAgICAvLyBmdW5jIHZhbHVlSW5zdGFuY2VPZih2IHJlZiwgdCByZWYpIGJvb2xcbiAgICAgIFwic3lzY2FsbC9qcy52YWx1ZUluc3RhbmNlT2ZcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDgoXG4gICAgICAgICAgc3AgKyAyNCxcbiAgICAgICAgICB0aGlzLl9sb2FkVmFsdWUoc3AgKyA4KSBpbnN0YW5jZW9mICh0aGlzLl9sb2FkVmFsdWUoc3AgKyAxNikgYXMgYW55KVxuICAgICAgICAgICAgPyAxXG4gICAgICAgICAgICA6IDBcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgY29weUJ5dGVzVG9Hbyhkc3QgW11ieXRlLCBzcmMgcmVmKSAoaW50LCBib29sKVxuICAgICAgXCJzeXNjYWxsL2pzLmNvcHlCeXRlc1RvR29cIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgZHN0ID0gdGhpcy5fbG9hZFNsaWNlKHNwICsgOCk7XG4gICAgICAgIGNvbnN0IHNyYyA9IHRoaXMuX2xvYWRWYWx1ZShzcCArIDMyKTtcbiAgICAgICAgaWYgKCEoc3JjIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICB0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9Db3B5ID0gc3JjLnN1YmFycmF5KDAsIGRzdC5sZW5ndGgpO1xuICAgICAgICBkc3Quc2V0KHRvQ29weSk7XG4gICAgICAgIHRoaXMuX3NldEludDY0KHNwICsgNDAsIHRvQ29weS5sZW5ndGgpO1xuICAgICAgICB0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGZ1bmMgY29weUJ5dGVzVG9KUyhkc3QgcmVmLCBzcmMgW11ieXRlKSAoaW50LCBib29sKVxuICAgICAgXCJzeXNjYWxsL2pzLmNvcHlCeXRlc1RvSlNcIjogKHNwOiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgZHN0ID0gdGhpcy5fbG9hZFZhbHVlKHNwICsgOCk7XG4gICAgICAgIGNvbnN0IHNyYyA9IHRoaXMuX2xvYWRTbGljZShzcCArIDE2KTtcbiAgICAgICAgaWYgKCEoZHN0IGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICB0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9Db3B5ID0gc3JjLnN1YmFycmF5KDAsIGRzdC5sZW5ndGgpO1xuICAgICAgICBkc3Quc2V0KHRvQ29weSk7XG4gICAgICAgIHRoaXMuX3NldEludDY0KHNwICsgNDAsIHRvQ29weS5sZW5ndGgpO1xuICAgICAgICB0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcbiAgICAgIH0sXG5cbiAgICAgIGRlYnVnOiAodmFsdWU/OiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGFzeW5jIHJ1bihpbnN0YW5jZTogV2ViQXNzZW1ibHkuSW5zdGFuY2UsIHRoaW5nOiBvYmplY3QgPSB7fSkge1xuICAgIHRoaXMuX2luc3QgPSBpbnN0YW5jZTtcbiAgICB0aGlzLm1lbSA9IG5ldyBEYXRhVmlldyhhc01lbW9yeSh0aGlzLl9pbnN0LmV4cG9ydHMubWVtKS5idWZmZXIpO1xuICAgIHRoaXMuX3ZhbHVlcyA9IFtcbiAgICAgIC8vIEpTIHZhbHVlcyB0aGF0IEdvIGN1cnJlbnRseSBoYXMgcmVmZXJlbmNlcyB0bywgaW5kZXhlZCBieSByZWZlcmVuY2UgaWRcbiAgICAgIE5hTixcbiAgICAgIDAsXG4gICAgICBudWxsLFxuICAgICAgdHJ1ZSxcbiAgICAgIGZhbHNlLFxuICAgICAge1xuICAgICAgICBBcnJheSxcbiAgICAgICAgY3J5cHRvLFxuICAgICAgICBmZXRjaCxcbiAgICAgICAgZnMsXG4gICAgICAgIE9iamVjdCxcbiAgICAgICAgcHJvY2VzcyxcbiAgICAgICAgVWludDhBcnJheSxcbiAgICAgICAgLi4udGhpbmcsXG4gICAgICB9LFxuICAgICAgdGhpcyxcbiAgICBdO1xuICAgIHRoaXMuX2dvUmVmQ291bnRzID0gW107IC8vIG51bWJlciBvZiByZWZlcmVuY2VzIHRoYXQgR28gaGFzIHRvIGEgSlMgdmFsdWUsIGluZGV4ZWQgYnkgcmVmZXJlbmNlIGlkXG4gICAgdGhpcy5faWRzID0gbmV3IE1hcCgpOyAvLyBtYXBwaW5nIGZyb20gSlMgdmFsdWVzIHRvIHJlZmVyZW5jZSBpZHNcbiAgICB0aGlzLl9pZFBvb2wgPSBbXTsgLy8gdW51c2VkIGlkcyB0aGF0IGhhdmUgYmVlbiBnYXJiYWdlIGNvbGxlY3RlZFxuICAgIHRoaXMuZXhpdGVkID0gZmFsc2U7IC8vIHdoZXRoZXIgdGhlIEdvIHByb2dyYW0gaGFzIGV4aXRlZFxuXG4gICAgLy8gUGFzcyBjb21tYW5kIGxpbmUgYXJndW1lbnRzIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdG8gV2ViQXNzZW1ibHkgYnkgd3JpdGluZyB0aGVtIHRvIHRoZSBsaW5lYXIgbWVtb3J5LlxuICAgIGxldCBvZmZzZXQgPSA0MDk2O1xuXG4gICAgY29uc3Qgc3RyUHRyID0gKHN0cjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBwdHIgPSBvZmZzZXQ7XG4gICAgICBjb25zdCBieXRlcyA9IGVuY29kZXIuZW5jb2RlKHN0ciArIFwiXFwwXCIpO1xuICAgICAgbmV3IFVpbnQ4QXJyYXkodGhpcy5tZW0uYnVmZmVyLCBvZmZzZXQsIGJ5dGVzLmxlbmd0aCkuc2V0KGJ5dGVzKTtcbiAgICAgIG9mZnNldCArPSBieXRlcy5sZW5ndGg7XG4gICAgICBpZiAob2Zmc2V0ICUgOCAhPT0gMCkge1xuICAgICAgICBvZmZzZXQgKz0gOCAtIChvZmZzZXQgJSA4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwdHI7XG4gICAgfTtcblxuICAgIGNvbnN0IGFyZ2MgPSB0aGlzLmFyZ3YubGVuZ3RoO1xuXG4gICAgY29uc3QgYXJndlB0cnMgPSBbXTtcbiAgICB0aGlzLmFyZ3YuZm9yRWFjaCgoYXJnKSA9PiB7XG4gICAgICBhcmd2UHRycy5wdXNoKHN0clB0cihhcmcpKTtcbiAgICB9KTtcbiAgICBhcmd2UHRycy5wdXNoKDApO1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuZW52KS5zb3J0KCk7XG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGFyZ3ZQdHJzLnB1c2goc3RyUHRyKGAke2tleX09JHt0aGlzLmVudltrZXldfWApKTtcbiAgICB9KTtcbiAgICBhcmd2UHRycy5wdXNoKDApO1xuXG4gICAgY29uc3QgYXJndiA9IG9mZnNldDtcbiAgICBhcmd2UHRycy5mb3JFYWNoKChwdHIpID0+IHtcbiAgICAgIHRoaXMubWVtLnNldFVpbnQzMihvZmZzZXQsIHB0ciwgdHJ1ZSk7XG4gICAgICB0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0ICsgNCwgMCwgdHJ1ZSk7XG4gICAgICBvZmZzZXQgKz0gODtcbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5faW5zdC5leHBvcnRzLnJ1biA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgdGhpcy5faW5zdC5leHBvcnRzLnJ1bihhcmdjLCBhcmd2KTtcbiAgICBpZiAodGhpcy5leGl0ZWQpIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVFeGl0UHJvbWlzZSgpO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9leGl0UHJvbWlzZTtcbiAgfVxuXG4gIF9yZXN1bWUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuZXhpdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHbyBwcm9ncmFtIGhhcyBhbHJlYWR5IGV4aXRlZFwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9pbnN0LmV4cG9ydHMucmVzdW1lID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuX2luc3QuZXhwb3J0cy5yZXN1bWUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZXhpdGVkKSB7XG4gICAgICB0aGlzLl9yZXNvbHZlRXhpdFByb21pc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX21ha2VGdW5jV3JhcHBlcihpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuICguLi5hcmdzOiB1bmtub3duW10pID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50OiBFdmVudCA9IHsgaWQ6IGlkLCB0aGlzOiB0aGlzLCBhcmdzIH07XG4gICAgICB0aGlzLl9wZW5kaW5nRXZlbnQgPSBldmVudDtcbiAgICAgIHRoaXMuX3Jlc3VtZSgpO1xuICAgICAgcmV0dXJuIGV2ZW50LnJlc3VsdDtcbiAgICB9O1xuICB9XG5cbiAgX3NldEludDY0ID0gKGFkZHI6IG51bWJlciwgdjogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyAwLCB2LCB0cnVlKTtcbiAgICB0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIE1hdGguZmxvb3IodiAvIDQyOTQ5NjcyOTYpLCB0cnVlKTtcbiAgfTtcblxuICBfZ2V0SW50NjQgPSAoYWRkcjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbG93ID0gdGhpcy5tZW0uZ2V0VWludDMyKGFkZHIgKyAwLCB0cnVlKTtcbiAgICBjb25zdCBoaWdoID0gdGhpcy5tZW0uZ2V0SW50MzIoYWRkciArIDQsIHRydWUpO1xuICAgIHJldHVybiBsb3cgKyBoaWdoICogNDI5NDk2NzI5NjtcbiAgfTtcblxuICBfbG9hZFZhbHVlID0gKGFkZHI6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGYgPSB0aGlzLm1lbS5nZXRGbG9hdDY0KGFkZHIsIHRydWUpO1xuICAgIGlmIChmID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWlzTmFOKGYpKSB7XG4gICAgICByZXR1cm4gZjtcbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IHRoaXMubWVtLmdldFVpbnQzMihhZGRyLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzW2lkXTtcbiAgfTtcblxuICBfc3RvcmVWYWx1ZSA9IChhZGRyOiBudW1iZXIsIHY6IHVua25vd24pID0+IHtcbiAgICBjb25zdCBuYW5IZWFkID0gMHg3ZmY4MDAwMDtcblxuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKGlzTmFOKHYpKSB7XG4gICAgICAgIHRoaXMubWVtLnNldFVpbnQzMihhZGRyICsgNCwgbmFuSGVhZCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCAwLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHYgPT09IDApIHtcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyA0LCBuYW5IZWFkLCB0cnVlKTtcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIsIDEsIHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLm1lbS5zZXRGbG9hdDY0KGFkZHIsIHYsIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAodikge1xuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgMCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgbnVsbDpcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyA0LCBuYW5IZWFkLCB0cnVlKTtcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIsIDIsIHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMubWVtLnNldFVpbnQzMihhZGRyICsgNCwgbmFuSGVhZCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCAzLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyA0LCBuYW5IZWFkLCB0cnVlKTtcbiAgICAgICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIsIDQsIHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGlkID0gdGhpcy5faWRzLmdldCh2KTtcbiAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWQgPSB0aGlzLl9pZFBvb2wucG9wKCk7XG4gICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZCA9IHRoaXMuX3ZhbHVlcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICB0aGlzLl92YWx1ZXNbaWRdID0gdjtcbiAgICAgIHRoaXMuX2dvUmVmQ291bnRzW2lkXSA9IDA7XG4gICAgICB0aGlzLl9pZHMuc2V0KHYsIGlkKTtcbiAgICB9XG4gICAgdGhpcy5fZ29SZWZDb3VudHNbaWRdKys7XG4gICAgbGV0IHR5cGVGbGFnID0gMTtcbiAgICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgIHR5cGVGbGFnID0gMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIHR5cGVGbGFnID0gMztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgdHlwZUZsYWcgPSA0O1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyA0LCBuYW5IZWFkIHwgdHlwZUZsYWcsIHRydWUpO1xuICAgIHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCBpZCwgdHJ1ZSk7XG4gIH07XG5cbiAgX2xvYWRTbGljZSA9IChhZGRyOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBhcnJheSA9IHRoaXMuX2dldEludDY0KGFkZHIgKyAwKTtcbiAgICBjb25zdCBsZW4gPSB0aGlzLl9nZXRJbnQ2NChhZGRyICsgOCk7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGFzTWVtb3J5KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0pLmJ1ZmZlciwgYXJyYXksIGxlbik7XG4gIH07XG5cbiAgX2xvYWRTbGljZU9mVmFsdWVzID0gKGFkZHI6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGFycmF5ID0gdGhpcy5fZ2V0SW50NjQoYWRkciArIDApO1xuICAgIGNvbnN0IGxlbiA9IHRoaXMuX2dldEludDY0KGFkZHIgKyA4KTtcbiAgICBjb25zdCBhID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgYVtpXSA9IHRoaXMuX2xvYWRWYWx1ZShhcnJheSArIGkgKiA4KTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG4gIH07XG5cbiAgX2xvYWRTdHJpbmcgPSAoYWRkcjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qgc2FkZHIgPSB0aGlzLl9nZXRJbnQ2NChhZGRyICsgMCk7XG4gICAgY29uc3QgbGVuID0gdGhpcy5fZ2V0SW50NjQoYWRkciArIDgpO1xuICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShcbiAgICAgIG5ldyBEYXRhVmlldyhhc01lbW9yeSh0aGlzLl9pbnN0LmV4cG9ydHMubWVtKS5idWZmZXIsIHNhZGRyLCBsZW4pXG4gICAgKTtcbiAgfTtcbn1cbiJdfQ==
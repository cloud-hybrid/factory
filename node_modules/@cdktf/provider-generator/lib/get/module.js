"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isRegistryModule = void 0;
const is_valid_domain_1 = __importDefault(require("is-valid-domain"));
// Logic from https://github.com/hashicorp/terraform/blob/e09b831f6ee35d37b11b8dcccd3a6d6f6db5e5ff/internal/addrs/module_source.go#L198
function isRegistryModule(source) {
    const parts = source.split("/");
    if (source.startsWith(".") ||
        parts.length < 3 ||
        parts.length > 4 ||
        source.includes("github.com") ||
        source.includes("bitbucket.org")) {
        return false;
    }
    if (parts.length === 4 && !is_valid_domain_1.default(parts[0])) {
        return false;
    }
    return true;
}
exports.isRegistryModule = isRegistryModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHNFQUE0QztBQUU1Qyx1SUFBdUk7QUFDdkksU0FBZ0IsZ0JBQWdCLENBQUMsTUFBYztJQUM3QyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLElBQ0UsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUM7UUFDdEIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO1FBQ2hCLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUNoQixNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQztRQUM3QixNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUNoQztRQUNBLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFFRCxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMseUJBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNsRCxPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBakJELDRDQWlCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBpc1ZhbGlkRG9tYWluIGZyb20gXCJpcy12YWxpZC1kb21haW5cIjtcblxuLy8gTG9naWMgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaGFzaGljb3JwL3RlcnJhZm9ybS9ibG9iL2UwOWI4MzFmNmVlMzVkMzdiMTFiOGRjY2NkM2E2ZDZmNmRiNWU1ZmYvaW50ZXJuYWwvYWRkcnMvbW9kdWxlX3NvdXJjZS5nbyNMMTk4XG5leHBvcnQgZnVuY3Rpb24gaXNSZWdpc3RyeU1vZHVsZShzb3VyY2U6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IHNvdXJjZS5zcGxpdChcIi9cIik7XG4gIGlmIChcbiAgICBzb3VyY2Uuc3RhcnRzV2l0aChcIi5cIikgfHxcbiAgICBwYXJ0cy5sZW5ndGggPCAzIHx8XG4gICAgcGFydHMubGVuZ3RoID4gNCB8fFxuICAgIHNvdXJjZS5pbmNsdWRlcyhcImdpdGh1Yi5jb21cIikgfHxcbiAgICBzb3VyY2UuaW5jbHVkZXMoXCJiaXRidWNrZXQub3JnXCIpXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChwYXJ0cy5sZW5ndGggPT09IDQgJiYgIWlzVmFsaWREb21haW4ocGFydHNbMF0pKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iXX0=